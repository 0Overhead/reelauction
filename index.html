<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0a">
    <title>ReelAuction - Real Reels. Real Time.</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-card: #1a1a1a;
            --accent-fire: #ff3d00;
            --accent-gold: #ffd700;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --border: #2a2a2a;
            --success: #00ff88;
            --warning: #ff9500;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }
        
        html {
            overflow-x: hidden;
            width: 100%;
        }

        /* Animated Background */
        .bg-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(255, 61, 0, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
            z-index: 0;
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* Header */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .logo {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.25rem;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, var(--accent-fire), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }

        .nav-buttons {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }
        
        .hamburger-menu {
            background: var(--bg-card);
            border: 2px solid var(--accent-fire);
            border-radius: 8px;
            padding: 0.5rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 4px;
            width: 40px;
            height: 40px;
            justify-content: center;
            align-items: center;
        }
        
        .hamburger-menu span {
            width: 20px;
            height: 2px;
            background: var(--accent-fire);
            transition: all 0.3s;
        }
        
        .mobile-nav {
            position: fixed;
            top: 70px;
            right: -100%;
            width: 280px;
            max-width: 90vw;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: right 0.3s ease-out;
            z-index: 999;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-nav.active {
            right: 1rem;
        }
        
        .mobile-nav-item {
            display: block;
            width: 100%;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .mobile-nav-item:hover {
            border-color: var(--accent-fire);
            background: var(--bg-card);
        }
        
        .mobile-nav-item.premium {
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            color: #000;
            border-color: var(--accent-gold);
        }

        .user-info {
            display: none !important; /* Hidden - info available in hamburger menu */
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg-card);
            border-radius: 100px;
            border: 2px solid var(--accent-fire);
            font-size: 0.85rem;
        }

        .user-role {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-gold);
            font-weight: 700;
        }

        .balance {
            font-weight: 700;
            color: var(--success);
            font-size: 0.85rem;
        }

        /* Buttons */
        .btn {
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-fire), #ff6b3d);
            color: white;
            box-shadow: 0 4px 20px rgba(255, 61, 0, 0.4);
            border: 2px solid var(--accent-fire);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(255, 61, 0, 0.6);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 2px solid var(--accent-fire);
        }

        .btn-secondary:hover {
            border-color: var(--accent-gold);
            background: var(--bg-dark);
        }

        .btn-ghost {
            background: transparent;
            color: var(--accent-fire);
            padding: 0.75rem 1rem;
            border: 2px solid var(--accent-fire);
            font-weight: 700;
        }

        .btn-ghost:hover {
            background: var(--accent-fire);
            color: white;
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 1rem;
            width: 100%;
            box-sizing: border-box;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 4rem 0;
            animation: fadeInUp 0.8s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero h1 {
            font-family: 'Archivo Black', sans-serif;
            font-size: clamp(2rem, 6vw, 4rem);
            line-height: 1.1;
            margin-bottom: 1rem;
            letter-spacing: -2px;
        }

        .hero .gradient-text {
            background: linear-gradient(135deg, var(--accent-fire), var(--accent-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Sections */
        .section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Auth Forms */
        .auth-container {
            max-width: 400px;
            margin: 3rem auto;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2.5rem;
        }

        .auth-container h2 {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .auth-container p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.875rem;
            background: var(--bg-dark);
            border: 2px solid var(--accent-fire);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .char-counter {
            text-align: right;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        /* Camera Section */
        .camera-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .capture-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        
        .capture-option:active {
            transform: translateY(0);
        }

        .camera-view {
            position: relative;
            background: var(--bg-card);
            border-radius: 16px;
            overflow: hidden;
            border: 3px solid var(--accent-fire);
            margin-bottom: 1rem;
            max-height: 50vh;
            isolation: isolate;
        }

        #videoPreview,
        #capturedMedia {
            width: 100%;
            display: block;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            max-height: 50vh;
            object-fit: contain;
            touch-action: pinch-zoom;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .video-success-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 61, 0, 0.9), rgba(255, 215, 0, 0.9));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: 'Archivo Black', sans-serif;
            z-index: 10;
        }
        
        /* Grid Overlay */
        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: none;
        }
        
        .grid-overlay.active {
            display: block;
        }
        
        .grid-overlay svg {
            width: 100%;
            height: 100%;
        }
        
        /* Camera Settings Panel */
        .camera-settings {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        
        .settings-row:last-child {
            margin-bottom: 0;
        }
        
        .settings-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .settings-control select,
        .settings-control button {
            padding: 0.5rem 0.75rem;
            background: var(--bg-dark);
            border: 2px solid var(--accent-fire);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
        }
        
        .settings-control button.active {
            background: var(--accent-fire);
            color: white;
        }
        
        /* Timer Countdown Overlay */
        .timer-countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: 900;
            color: var(--accent-fire);
            text-shadow: 0 0 20px rgba(255, 61, 0, 0.8);
            z-index: 100;
            display: none;
            font-family: 'Archivo Black', sans-serif;
        }
        
        .timer-countdown.active {
            display: block;
            animation: countdownPulse 1s ease-in-out;
        }
        
        @keyframes countdownPulse {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        
        /* Recording Time Display */
        .recording-time {
            position: absolute;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 61, 0, 0.95);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 100px;
            font-weight: 700;
            font-size: 1.25rem;
            display: none;
            font-family: 'Archivo Black', sans-serif;
            box-shadow: 0 4px 15px rgba(255, 61, 0, 0.5);
        }
        
        .recording-time.active {
            display: block;
        }

        .camera-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 61, 0, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 700;
            color: white;
            pointer-events: none;
        }

        .camera-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0.75rem;
            background: var(--bg-card);
            border-radius: 12px;
            border: 2px solid var(--border);
        }

        .camera-controls button {
            flex-shrink: 0;
        }

        .record-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 4px solid var(--accent-fire);
            background: transparent;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
            flex-shrink: 0;
            box-shadow: 0 4px 15px rgba(255, 61, 0, 0.4);
        }

        .record-btn:hover {
            transform: scale(1.1);
        }

        .record-btn.recording {
            animation: recordPulse 1s ease-in-out infinite;
        }

        @keyframes recordPulse {
            0%, 100% { 
                border-color: var(--accent-fire);
                box-shadow: 0 4px 15px rgba(255, 61, 0, 0.4);
            }
            50% { 
                border-color: var(--accent-gold);
                box-shadow: 0 4px 25px rgba(255, 215, 0, 0.6);
            }
        }

        .record-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: 50%;
            background: var(--accent-fire);
            border-radius: 50%;
        }

        .record-btn.recording::after {
            border-radius: 8px;
            animation: pulse 1s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .camera-switch-btn,
        .media-type-btn {
            padding: 0.75rem 1.25rem;
            background: var(--bg-dark);
            border: 2px solid var(--accent-fire);
            border-radius: 8px;
            color: var(--text-primary);
            font-weight: 700;
            cursor: pointer;
            font-size: 0.9rem;
            white-space: nowrap;
        }
        
        .camera-switch-btn:active,
        .media-type-btn:active {
            background: var(--accent-fire);
            color: white;
        }

        /* Auction Grid */
        .auction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .auction-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s;
            cursor: pointer;
        }

        .auction-card:hover {
            transform: translateY(-4px);
            border-color: var(--accent-fire);
            box-shadow: 0 8px 30px rgba(255, 61, 0, 0.2);
        }

        .auction-media {
            position: relative;
            width: 100%;
            background: #000;
            overflow: hidden;
        }

        .auction-media img,
        .auction-media video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-family: 'Archivo Black', sans-serif;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.3);
            pointer-events: none;
            white-space: nowrap;
        }

        .auction-timer {
            font-weight: 700;
            font-size: 0.875rem;
            color: var(--accent-fire);
        }
        
        .auction-media .auction-timer {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: rgba(0, 0, 0, 0.8);
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
        }

        .auction-info {
            padding: 1.25rem;
        }

        .auction-description {
            color: var(--text-primary);
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .auction-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .current-bid {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.5rem;
            color: var(--accent-gold);
        }

        .bid-count {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Upcoming Events */
        .event-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .event-creator {
            font-weight: 700;
            color: var(--accent-gold);
            font-size: 0.875rem;
        }

        .event-badge {
            background: var(--accent-fire);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .event-description {
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 0.75rem;
        }

        .event-time {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Premium Badge */
        .premium-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            color: #000;
            padding: 0.5rem 1rem;
            border-radius: 100px;
            font-weight: 700;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            padding: 1rem;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }

        .modal-content {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 2rem 1.5rem;
            max-width: 600px;
            width: 100%;
            position: relative;
            margin: auto;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--bg-dark);
            border: 2px solid var(--accent-fire);
            color: var(--accent-fire);
            font-size: 1.5rem;
            cursor: pointer;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
            font-weight: 700;
            z-index: 10;
        }

        .modal-close:hover {
            background: var(--accent-fire);
            color: white;
        }
        
        .modal-media-container {
            position: relative;
            margin-bottom: 1.5rem;
            border-radius: 12px;
            overflow: hidden;
            width: 100%;
            min-height: 300px;
            max-height: 65vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }
        
        .modal-media-container img,
        .modal-media-container video {
            width: 100%;
            height: 100%;
            max-height: 65vh;
            object-fit: contain;
            display: block;
        }

        .bid-form {
            margin-top: 1.5rem;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--accent-fire);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .auction-grid {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                gap: 0.5rem;
            }

            .btn {
                padding: 0.75rem 1.25rem;
                font-size: 0.9rem;
            }
            
            .user-info {
                font-size: 0.75rem;
            }
            
            .balance {
                font-size: 0.75rem;
            }
        }
        
        /* User Dashboard */
        .dashboard-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .dashboard-tab {
            padding: 0.875rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .dashboard-tab.active {
            background: var(--accent-fire);
            color: white;
            border-color: var(--accent-fire);
        }
        
        .dashboard-content {
            display: none;
        }
        
        .dashboard-content.active {
            display: block;
        }
        
        .listing-card {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }
        
        .listing-card:hover {
            border-color: var(--accent-fire);
        }
        
        .listing-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }
        
        .listing-status {
            padding: 0.375rem 0.875rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .listing-status.active {
            background: var(--success);
            color: #000;
        }
        
        .listing-status.ended {
            background: var(--text-secondary);
            color: #000;
        }
        
        .listing-status.sold {
            background: var(--accent-gold);
            color: #000;
        }

        /* Status Messages */
        .status-message {
            position: fixed;
            top: 80px;
            right: 1.5rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            font-weight: 500;
            z-index: 3000;
            animation: slideIn 0.3s ease-out;
            max-width: 300px;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .status-success {
            background: var(--success);
            color: #000;
        }

        .status-error {
            background: var(--accent-fire);
            color: white;
        }

        .status-info {
            background: var(--accent-gold);
            color: #000;
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>

    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo" onclick="showSection('dashboardSection')">REELAUCTION</div>
            <div class="nav-buttons">
                <div class="user-info" id="userInfo" style="display: none;">
                    <span class="user-role" id="userRole">CREATOR</span>
                    <span id="userName">Guest</span>
                    <span class="balance" id="userBalance">$0</span>
                </div>
                <div class="hamburger-menu" id="hamburgerBtn" style="display: none;" onclick="toggleMobileNav()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Menu -->
    <div class="mobile-nav" id="mobileNav">
        <button class="mobile-nav-item" onclick="showSection('userDashboardSection'); toggleMobileNav()">
            üìä My Dashboard
        </button>
        <button class="mobile-nav-item" id="navAdminDashboard" style="display: none;" onclick="showSection('adminDashboardSection'); toggleMobileNav()">
            üîí Admin Dashboard
        </button>
        <button class="mobile-nav-item" onclick="showSection('dashboardSection'); toggleMobileNav()">
            üî• Live Auctions
        </button>
        <button class="mobile-nav-item" id="navCreateContent" style="display: none;" onclick="showSection('cameraSection'); initCamera(); toggleMobileNav()">
            üì∏ Create Content
        </button>
        <button class="mobile-nav-item" onclick="showSection('eventsSection'); toggleMobileNav()">
            üìÖ View Upcoming Events
        </button>
        <button class="mobile-nav-item" id="navPostEvent" style="display: none;" onclick="showSection('postEventSection'); toggleMobileNav()">
            ‚ûï Post Event
        </button>
        <button class="mobile-nav-item premium" id="navUpgrade" style="display: none;" onclick="showUpgradeModal(); toggleMobileNav()">
            ‚≠ê Upgrade Premium
        </button>
        <button class="mobile-nav-item" style="border-color: var(--accent-fire); color: var(--accent-fire);" onclick="handleLogout(); toggleMobileNav()">
            üö™ Logout
        </button>
    </div>

    <div class="container">
        <!-- Landing Hero -->
        <section id="landingSection" class="section active">
            <div class="hero">
                <h1>
                    Real Reels.<br>
                    <span class="gradient-text">Real Time.</span>
                </h1>
                <p style="font-size: 1.25rem; margin-bottom: 2rem;">The marketplace for authentic moments captured and auctioned instantly.<br>
                <span style="color: var(--accent-gold); font-weight: 700;">Every piece includes a Certificate of Authenticity.</span></p>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-bottom: 1rem;">
                    <button class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2.5rem;" onclick="showSection('registerSection')">Start Creating</button>
                    <button class="btn btn-secondary" style="font-size: 1.1rem; padding: 1rem 2.5rem;" onclick="showSection('loginSection')">Login</button>
                </div>
                <p style="font-size: 0.875rem; color: var(--text-secondary);">Start earning from your moments ‚Ä¢ Free to join</p>
            </div>

            <!-- Sample Live Auction -->
            <div style="max-width: 600px; margin: 4rem auto;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 1.75rem; margin-bottom: 1.5rem; text-align: center;">
                    üî• Live Right Now
                </h2>
                <div class="auction-card" style="cursor: default;">
                    <div class="auction-media">
                        <img src="https://images.unsplash.com/photo-1583121274602-3e2820c69888?w=800&q=80" alt="Ferrari SF90 spotted in Beverly Hills" style="width: 100%; height: auto; display: block;">
                        <div class="watermark">REELAUCTION</div>
                        <div style="position: absolute; top: 1rem; left: 1rem; background: rgba(0, 0, 0, 0.8); color: var(--accent-gold); padding: 0.25rem 0.75rem; border-radius: 100px; font-size: 0.7rem; font-weight: 700; border: 1px solid var(--accent-gold);">üèÜ CERTIFIED</div>
                        <div style="position: absolute; top: 1rem; right: 1rem; background: linear-gradient(135deg, var(--accent-gold), #ffed4e); color: #000; padding: 0.25rem 0.75rem; border-radius: 100px; font-size: 0.7rem; font-weight: 700;">‚≠ê PREMIUM</div>
                    </div>
                    <div class="auction-info">
                        <div class="auction-description">Rare red Ferrari spotted in Beverly Hills - exclusive shot from Rodeo Drive!</div>
                        <div class="auction-meta">
                            <div>
                                <div class="current-bid">$47</div>
                                <div class="bid-count">23 bids ‚Ä¢ Started at $5</div>
                                <div style="color: var(--accent-fire); font-size: 0.875rem; font-weight: 700; margin-top: 0.25rem;">
                                    <span style="font-size: 0.75rem; color: var(--text-secondary);">Time Remaining:</span> 
                                    <span>42:18</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.85rem;" onclick="showSection('registerSection')">
                                Sign Up to Bid
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Upcoming Events Preview -->
            <div style="max-width: 800px; margin: 4rem auto;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 1.75rem; margin-bottom: 1.5rem; text-align: center;">
                    üìÖ Upcoming Content Events
                </h2>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                    Premium creators announce where they'll be capturing exclusive content
                </p>
                
                <div class="event-card">
                    <div class="event-header">
                        <div>
                            <div class="event-creator">@AutoExclusive</div>
                            <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                        </div>
                        <div class="event-badge" style="background: var(--accent-fire);">LIVE NOW</div>
                    </div>
                    <div class="event-description">
                        Currently at Pebble Beach Car Show capturing rare vintage vehicles and new releases. Exclusive access to VIP area!
                    </div>
                    <div class="event-time">üìÖ Today, 2:00 PM - 6:00 PM PST ‚Ä¢ üåé Pebble Beach, CA</div>
                </div>

                <div class="event-card">
                    <div class="event-header">
                        <div>
                            <div class="event-creator">@ConcertPhotog</div>
                            <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                        </div>
                        <div class="event-badge">UPCOMING</div>
                    </div>
                    <div class="event-description">
                        Front row at tonight's sold-out stadium concert. Expecting incredible shots of the performance and crowd energy.
                    </div>
                    <div class="event-time">üìÖ Tonight, 8:00 PM - 11:30 PM EST ‚Ä¢ üåé Madison Square Garden ‚Ä¢ Starts in 5 hours</div>
                </div>
            </div>

            <!-- Premium Benefits -->
            <div style="max-width: 900px; margin: 4rem auto; background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 61, 0, 0.1)); border: 2px solid var(--accent-gold); border-radius: 16px; padding: 3rem 2rem;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div class="premium-badge" style="font-size: 1.25rem; padding: 0.75rem 1.5rem; display: inline-flex; margin-bottom: 1rem;">‚≠ê PREMIUM CREATOR</div>
                    <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 0.5rem;">
                        Unlock Premium Features
                    </h2>
                    <p style="color: var(--text-secondary); font-size: 1.1rem;">$49/year ‚Ä¢ Everything you need to maximize earnings</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.75rem;">üí∞</div>
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Custom Starting Bids</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Set your own minimum price instead of $1 default</p>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.75rem;">üìÖ</div>
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Event Announcements</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Let buyers know where you'll be shooting next</p>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.75rem;">‚≠ê</div>
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Premium Badge</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Stand out with verified premium status</p>
                    </div>
                    
                    <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px;">
                        <div style="font-size: 2rem; margin-bottom: 0.75rem;">üìä</div>
                        <h3 style="margin-bottom: 0.5rem; font-size: 1.1rem;">Priority Support</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Get help fast with dedicated creator support</p>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 3rem;" onclick="showSection('registerSection')">
                        Start Your Free Trial
                    </button>
                    <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.75rem;">30-day money-back guarantee</p>
                </div>
            </div>

            <!-- Value Propositions -->
            <div style="max-width: 1000px; margin: 4rem auto;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 3rem; text-align: center;">
                    Why ReelAuction?
                </h2>
                
                <div style="display: grid; gap: 2rem;">
                    <div style="display: grid; grid-template-columns: auto 1fr; gap: 1.5rem; align-items: start;">
                        <div style="font-size: 3rem;">üèÜ</div>
                        <div>
                            <h3 style="font-size: 1.3rem; margin-bottom: 0.5rem;">Certificate of Authenticity</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6;">Every piece includes GPS-verified, timestamped proof of authenticity. Court-admissible documentation that makes your content valuable for news, legal, and archival purposes.</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: auto 1fr; gap: 1.5rem; align-items: start;">
                        <div style="font-size: 3rem;">üíé</div>
                        <div>
                            <h3 style="font-size: 1.3rem; margin-bottom: 0.5rem;">Provably One-of-One</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6;">Unlike stock photos, this content can't be uploaded from anywhere. It's captured live in-app, making it genuinely unique and exclusive to the buyer.</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: auto 1fr; gap: 1.5rem; align-items: start;">
                        <div style="font-size: 3rem;">‚ö°</div>
                        <div>
                            <h3 style="font-size: 1.3rem; margin-bottom: 0.5rem;">Real-Time Marketplace</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6;">Capture breaking moments and list them instantly. 24-hour auctions create urgency and competitive bidding, maximizing your earnings.</p>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: auto 1fr; gap: 1.5rem; align-items: start;">
                        <div style="font-size: 3rem;">üí∞</div>
                        <div>
                            <h3 style="font-size: 1.3rem; margin-bottom: 0.5rem;">Keep 80% of Every Sale</h3>
                            <p style="color: var(--text-secondary); line-height: 1.6;">You keep the vast majority of what buyers pay. Automatic payouts, full commercial rights transferred, and transparent pricing.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final CTA -->
            <div style="max-width: 700px; margin: 5rem auto; text-align: center; padding: 3rem 2rem; background: var(--bg-card); border-radius: 16px; border: 2px solid var(--accent-fire);">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2.5rem; margin-bottom: 1rem;">
                    Ready to Start Earning?
                </h2>
                <p style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 2rem;">
                    Turn everyday moments into income
                </p>
                <button class="btn btn-primary" style="font-size: 1.2rem; padding: 1.25rem 3rem; margin-bottom: 1rem;" onclick="showSection('registerSection')">
                    Create Free Account
                </button>
                <p style="font-size: 0.9rem; color: var(--text-secondary);">
                    ‚úì No credit card required ‚Ä¢ ‚úì Start selling in minutes ‚Ä¢ ‚úì Cancel anytime
                </p>
            </div>

            <div style="max-width: 800px; margin: 4rem auto; text-align: center;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 2rem;">How It Works</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem;">
                    <div>
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">üì∏</div>
                        <h3 style="margin-bottom: 0.5rem;">Capture</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Take photos or videos in real-time within the app</p>
                    </div>
                    <div>
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">‚è±Ô∏è</div>
                        <h3 style="margin-bottom: 0.5rem;">List</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Add a description and list your content instantly</p>
                    </div>
                    <div>
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">üî•</div>
                        <h3 style="margin-bottom: 0.5rem;">Auction</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">24-hour live auction starting at $1</p>
                    </div>
                    <div>
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">üí∞</div>
                        <h3 style="margin-bottom: 0.5rem;">Earn</h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Get 80% of the winning bid</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Login Section -->
        <section id="loginSection" class="section">
            <div class="auth-container">
                <h2>Welcome Back</h2>
                <p>Login to start creating or bidding</p>
                <form id="loginForm">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">Login</button>
                    <button type="button" class="btn btn-ghost" style="width: 100%;" onclick="showSection('registerSection')">
                        Need an account? Sign up
                    </button>
                </form>
            </div>
        </section>

        <!-- Register Section -->
        <section id="registerSection" class="section">
            <div class="auth-container">
                <h2>Join ReelAuction</h2>
                <p>Create your account to get started</p>
                <form id="registerForm">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="regName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="regEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="regPassword" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label>Account Type</label>
                        <select id="regRole" required>
                            <option value="creator">Content Creator</option>
                            <option value="buyer">Content Buyer</option>
                            <option value="both">Both (Creator & Buyer)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">Create Account</button>
                    <button type="button" class="btn btn-ghost" style="width: 100%;" onclick="showSection('loginSection')">
                        Already have an account? Login
                    </button>
                </form>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboardSection" class="section">
            <div style="margin-bottom: 2rem;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 1.5rem;">
                    Live Auctions
                </h2>
                
                <!-- Quick Actions for logged-in creators -->
                <div id="creatorQuickActions" style="display: none; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <button class="btn btn-primary" onclick="showSection('cameraSection'); initCamera(); if(currentUser && currentUser.isPremium) document.getElementById('startingBidGroup').style.display = 'block'; else document.getElementById('startingBidGroup').style.display = 'none';">
                            üì∏ Create Content
                        </button>
                        <button class="btn btn-secondary" onclick="showSection('userDashboardSection')">
                            üìä My Dashboard
                        </button>
                    </div>
                </div>
                
                <!-- Search Field -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="position: relative;">
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="Search auctions by description..." 
                            onkeyup="filterAuctions()"
                            style="width: 100%; padding: 1rem 1rem 1rem 3rem; background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 1rem; transition: all 0.3s;"
                            onfocus="this.style.borderColor='var(--accent-fire)'; this.style.boxShadow='0 0 0 3px rgba(255, 61, 0, 0.1)'"
                            onblur="this.style.borderColor='var(--border)'; this.style.boxShadow='none'"
                        >
                        <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); font-size: 1.25rem; pointer-events: none;">üîç</span>
                    </div>
                </div>
            </div>

            <div id="auctionsContainer" class="auction-grid">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading live auctions...</p>
                </div>
            </div>
        </section>

        <!-- User Dashboard Section -->
        <section id="userDashboardSection" class="section">
            <div style="max-width: 900px; margin: 0 auto;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 1.5rem;">
                    My Dashboard
                </h2>

                <div class="dashboard-tabs">
                    <button class="dashboard-tab active" onclick="switchDashboardTab('myListings')">
                        My Listings
                    </button>
                    <button class="dashboard-tab" onclick="switchDashboardTab('myBids')">
                        My Bids
                    </button>
                    <button class="dashboard-tab" onclick="switchDashboardTab('myPurchases')">
                        Purchased Content
                    </button>
                    <button class="dashboard-tab" id="premiumTab" style="display: none;" onclick="switchDashboardTab('premiumFeatures')">
                        ‚≠ê Premium
                    </button>
                </div>

                <!-- My Listings Tab -->
                <div class="dashboard-content active" id="myListingsContent">
                    <div id="userListingsContainer">
                        <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                            You haven't created any content yet. Start capturing!
                        </p>
                    </div>
                </div>

                <!-- My Bids Tab -->
                <div class="dashboard-content" id="myBidsContent">
                    <div id="userBidsContainer">
                        <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                            You haven't placed any bids yet.
                        </p>
                    </div>
                </div>

                <!-- Purchased Content Tab -->
                <div class="dashboard-content" id="myPurchasesContent">
                    <div id="userPurchasesContainer">
                        <p style="color: var(--text-secondary); text-align: center; padding: 2rem;">
                            You haven't won any auctions yet.
                        </p>
                    </div>
                </div>

                <!-- Premium Features Tab -->
                <div class="dashboard-content" id="premiumFeaturesContent">
                    <div style="background: var(--bg-card); border: 2px solid var(--accent-gold); border-radius: 12px; padding: 2rem; text-align: center;">
                        <div class="premium-badge" style="display: inline-flex; margin-bottom: 1rem; font-size: 1.1rem;">
                            ‚≠ê PREMIUM ACTIVE
                        </div>
                        <h3 style="margin-bottom: 1rem;">Premium Features Unlocked</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                            Membership expires: <span id="premiumExpiry">Dec 31, 2026</span>
                        </p>
                        <div style="display: grid; gap: 1rem; text-align: left;">
                            <div style="padding: 1rem; background: var(--bg-dark); border-radius: 8px;">
                                ‚úÖ Post upcoming event announcements
                            </div>
                            <div style="padding: 1rem; background: var(--bg-dark); border-radius: 8px;">
                                ‚úÖ Set custom starting bids on your content
                            </div>
                            <div style="padding: 1rem; background: var(--bg-dark); border-radius: 8px;">
                                ‚úÖ Premium badge on your listings
                            </div>
                        </div>
                    </div>
                </div>

                <button class="btn btn-ghost" style="width: 100%; margin-top: 2rem;" onclick="showSection('dashboardSection')">
                    ‚Üê Back to Live Auctions
                </button>
            </div>
        </section>

        <!-- Camera Section -->
        <section id="cameraSection" class="section">
            <div class="camera-container">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 0.5rem; text-align: center;">
                    Create Content
                </h2>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1.5rem; font-size: 0.9rem;">
                    Capture authentic photos and videos with your device's camera
                </p>
                
                <!-- Single Capture Button -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <button class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem; display: inline-flex; align-items: center; gap: 0.5rem;" onclick="openProCapture()">
                        <span style="font-size: 1.5rem;">üì∏</span>
                        Capture Photo/Video
                    </button>
                    <p style="color: var(--text-secondary); font-size: 0.85rem; margin-top: 0.75rem;">
                        Opens your device camera ‚Ä¢ Server-verified upload ‚Ä¢ Certificate of Authenticity
                    </p>
                </div>

                <!-- Camera View (hidden until capture) -->
                <div class="camera-view" style="position: relative; display: none;" id="cameraPreviewSection">
                    <video id="videoPreview" autoplay playsinline muted></video>
                    <img id="capturedMedia" style="display: none;">
                    
                    <!-- Video Capture Success Overlay -->
                    <div id="videoSuccessOverlay" class="video-success-overlay" style="display: none;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">‚úì</div>
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">Content Captured!</div>
                        <div style="font-size: 0.9rem; font-family: 'Inter', sans-serif; opacity: 0.9;">Server-verified and ready to list</div>
                    </div>
                    
                    <!-- Grid Overlay (not used with Pro Capture but keeping for compatibility) -->
                    <div class="grid-overlay" id="gridOverlay">
                        <svg viewBox="0 0 100 100" preserveAspectRatio="none">
                            <line x1="33.33" y1="0" x2="33.33" y2="100" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="66.66" y1="0" x2="66.66" y2="100" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="0" y1="33.33" x2="100" y2="33.33" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="0" y1="66.66" x2="100" y2="66.66" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <!-- Timer Countdown (not used with Pro Capture) -->
                    <div class="timer-countdown" id="timerCountdown">3</div>
                    
                    <!-- Recording Time Display (not used with Pro Capture) -->
                    <div class="recording-time" id="recordingTime">‚è∫ 00:00</div>
                    
                    <!-- Old timer (hidden now) -->
                    <div class="camera-overlay" id="cameraTimer" style="display: none;">00:00</div>
                    
                    <div id="captureSuccessMessage" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 255, 136, 0.95); color: #000; padding: 1.5rem 2rem; border-radius: 12px; font-weight: 700; font-size: 1.1rem; text-align: center;">
                <div class="camera-settings">
                    <div class="settings-row">
                        <span class="settings-label">Resolution</span>
                        <div class="settings-control">
                            <select id="resolutionSelect" onchange="changeResolution()">
                                <option value="720p">720p HD</option>
                                <option value="1080p" selected>1080p Full HD</option>
                                <option value="4K">4K Ultra HD</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-row">
                        <span class="settings-label">Aspect Ratio</span>
                        <div class="settings-control">
                            <select id="aspectRatioSelect" onchange="changeAspectRatio()">
                                <option value="16:9" selected>16:9 Standard</option>
                                <option value="1:1">1:1 Square</option>
                                <option value="9:16">9:16 Vertical</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-row">
                        <span class="settings-label">Grid</span>
                        <div class="settings-control">
                            <button id="gridToggle" onclick="toggleGrid()">OFF</button>
                        </div>
                    </div>
                    
                    <div class="settings-row">
                        <span class="settings-label">Timer</span>
                        <div class="settings-control">
                            <select id="timerSelect" onchange="changeTimer()">
                                <option value="0" selected>Off</option>
                                <option value="3">3 seconds</option>
                                <option value="5">5 seconds</option>
                                <option value="10">10 seconds</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-row" id="flashRow" style="display: none;">
                        <span class="settings-label">Flash</span>
                        <div class="settings-control">
                            <button id="flashToggle" onclick="toggleFlash()">OFF</button>
                        </div>
                    </div>
                </div>

                <!-- Camera View (Isolated for pinch-zoom) -->
                <div class="camera-view" style="position: relative;">
                    <video id="videoPreview" autoplay playsinline muted></video>
                    <img id="capturedMedia" style="display: none;">
                    
                    <!-- Video Capture Success Overlay -->
                    <div id="videoSuccessOverlay" class="video-success-overlay" style="display: none;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">‚úì</div>
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">Video Captured!</div>
                        <div style="font-size: 0.9rem; font-family: 'Inter', sans-serif; opacity: 0.9;">Ready to list</div>
                    </div>
                    
                    <!-- Grid Overlay -->
                    <div class="grid-overlay" id="gridOverlay">
                        <svg viewBox="0 0 100 100" preserveAspectRatio="none">
                            <line x1="33.33" y1="0" x2="33.33" y2="100" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="66.66" y1="0" x2="66.66" y2="100" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="0" y1="33.33" x2="100" y2="33.33" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                            <line x1="0" y1="66.66" x2="100" y2="66.66" stroke="rgba(255, 255, 255, 0.3)" stroke-width="0.5"/>
                        </svg>
                    </div>
                    
                    <!-- Timer Countdown -->
                    <div class="timer-countdown" id="timerCountdown">3</div>
                    
                    <!-- Recording Time Display (not used with Pro Capture) -->
                    <div class="recording-time" id="recordingTime">‚è∫ 00:00</div>
                    
                    <!-- Old timer (hidden now) -->
                    <div class="camera-overlay" id="cameraTimer" style="display: none;">00:00</div>
                    
                    <div id="captureSuccessMessage" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 255, 136, 0.95); color: #000; padding: 1.5rem 2rem; border-radius: 12px; font-weight: 700; font-size: 1.1rem; text-align: center;">
                        ‚úì Content Captured!
                    </div>
                </div><!-- End cameraPreviewSection -->

                <!-- Content Description Form -->
                <div id="contentForm" style="display: none;">
                    <!-- Success Header -->
                    <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(255, 215, 0, 0.1)); border: 2px solid var(--success); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 0.5rem;">‚úì</div>
                        <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.3rem; margin-bottom: 0.5rem;">
                            Content Captured!
                        </h3>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">
                            Now add a description and list your content on auction
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>Description (Max 160 characters)</label>
                        <textarea id="contentDescription" maxlength="160" placeholder="Describe what makes this moment valuable..."></textarea>
                        <div class="char-counter">
                            <span id="charCount">0</span>/160
                        </div>
                    </div>
                    
                    <!-- Premium Starting Bid Feature -->
                    <div class="form-group" id="startingBidGroup" style="display: none;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <label style="margin: 0;">Starting Bid</label>
                            <div class="premium-badge" style="margin: 0; padding: 0.25rem 0.5rem; font-size: 0.7rem;">‚≠ê PREMIUM</div>
                        </div>
                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                            <span style="font-size: 1.25rem; font-weight: 700;">$</span>
                            <input type="number" id="startingBidInput" min="1" step="1" value="1" 
                                   style="max-width: 120px; text-align: center; font-size: 1.25rem; font-weight: 700;">
                        </div>
                        <div style="color: var(--text-secondary); font-size: 0.75rem; margin-top: 0.5rem;">
                            Set your minimum starting bid (must be $1 or more)
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-primary" style="flex: 1;" onclick="submitContent()">
                            List on Auction
                        </button>
                        <button class="btn btn-secondary" onclick="resetCamera()">
                            Retake
                        </button>
                    </div>
                </div>

                <button class="btn btn-ghost" style="width: 100%; margin-top: 1.5rem;" onclick="showSection('dashboardSection')">
                    ‚Üê Back to Auctions
                </button>
            </div>
        </section>

        <!-- Upcoming Events Section -->
        <section id="eventsSection" class="section">
            <div style="max-width: 800px; margin: 0 auto;">
                <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 1rem;">
                    Upcoming Content Events
                </h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    Premium creators announce where they'll be capturing content
                </p>

                <div id="eventsContainer">
                    <!-- Sample event -->
                    <div class="event-card">
                        <div class="event-header">
                            <div>
                                <div class="event-creator">@NewsHunter</div>
                                <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                            </div>
                            <div class="event-badge">UPCOMING</div>
                        </div>
                        <div class="event-description">
                            I'll be covering the tech conference tomorrow morning. Expecting exclusive interviews and product launches.
                        </div>
                        <div class="event-time">üìÖ Tomorrow, 9:00 AM PST ‚Ä¢ üåé San Francisco</div>
                    </div>

                    <div class="event-card">
                        <div class="event-header">
                            <div>
                                <div class="event-creator">@StreetPhotog</div>
                                <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                            </div>
                            <div class="event-badge">LIVE NOW</div>
                        </div>
                        <div class="event-description">
                            Currently at the music festival capturing performances. Will post exclusive backstage content throughout the evening.
                        </div>
                        <div class="event-time">üìÖ Today, 6:00 PM PST ‚Ä¢ üåé Los Angeles</div>
                    </div>
                </div>

                <button class="btn btn-ghost" style="width: 100%; margin-top: 2rem;" onclick="showSection('dashboardSection')">
                    ‚Üê Back to Auctions
                </button>
            </div>
        </section>

        <!-- Post Event Section -->
        <section id="postEventSection" class="section">
            <div class="auth-container">
                <div class="premium-badge">‚≠ê PREMIUM FEATURE</div>
                <h2>Post Upcoming Event</h2>
                <p>Let buyers know when and where you'll be capturing content</p>
                <form id="eventForm">
                    <div class="form-group">
                        <label>Event Description</label>
                        <textarea id="eventDescription" maxlength="200" placeholder="Where will you be? What content will you capture?" required></textarea>
                        <div class="char-counter">
                            <span id="eventCharCount">0</span>/200
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Start Date & Time</label>
                        <input type="datetime-local" id="eventDateTime" required>
                    </div>
                    <div class="form-group">
                        <label>End Date & Time</label>
                        <input type="datetime-local" id="eventEndTime" required>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="eventLocation" placeholder="City, State" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;">
                        Post Event
                    </button>
                    <button type="button" class="btn btn-ghost" style="width: 100%;" onclick="showSection('dashboardSection')">
                        Cancel
                    </button>
                </form>
            </div>
        </section>
        
        <!-- Admin Dashboard Section -->
        <section id="adminDashboardSection" class="section">
            <div style="max-width: 1200px; margin: 0 auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem;">
                        üîí Admin Dashboard
                    </h2>
                    <button class="btn btn-ghost" onclick="showSection('dashboardSection')">
                        ‚Üê Back to Auctions
                    </button>
                </div>
                
                <!-- Stats Overview -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Total Auctions</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--accent-fire);" id="adminTotalAuctions">0</div>
                    </div>
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Active Auctions</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--success);" id="adminActiveAuctions">0</div>
                    </div>
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Total Bids</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--accent-gold);" id="adminTotalBids">0</div>
                    </div>
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Total Volume</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--accent-gold);" id="adminTotalVolume">$0</div>
                    </div>
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Platform Revenue (20%)</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--success);" id="adminPlatformRevenue">$0</div>
                    </div>
                    <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 1.5rem;">
                        <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">Premium Users</div>
                        <div style="font-size: 2rem; font-weight: 700; color: var(--accent-gold);" id="adminPremiumUsers">0</div>
                    </div>
                </div>
                
                <!-- Content Moderation -->
                <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem;">
                    <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1.5rem;">
                        Content Moderation
                    </h3>
                    <div id="adminAuctionsList">
                        <!-- Auctions will be loaded here -->
                    </div>
                </div>
                
                <!-- Recent Activity Log -->
                <div style="background: var(--bg-card); border: 2px solid var(--border); border-radius: 12px; padding: 2rem;">
                    <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1.5rem;">
                        Recent Activity
                    </h3>
                    <div id="adminActivityLog" style="font-family: monospace; font-size: 0.875rem; max-height: 400px; overflow-y: auto;">
                        <!-- Activity log will be populated here -->
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Auction Detail Modal -->
    <div id="auctionModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">‚úï</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // State Management
        let currentUser = null;
        let mediaStream = null;
        let mediaRecorder = null;
        let recordedChunks = [];
        let capturedBlob = null;
        let isRecording = false;
        let recordingTimer = null;
        let recordingSeconds = 0;
        let currentCamera = 'user'; // 'user' or 'environment'
        let mediaType = 'photo'; // 'photo' or 'video'
        let userBids = []; // Track user's bids
        let activeDashboardTab = 'myListings';
        
        // Camera settings
        let selectedResolution = '1080p'; // '720p', '1080p', '4K'
        let showGrid = false;
        let selectedAspectRatio = '16:9'; // '16:9', '1:1', '9:16'
        let flashEnabled = false;
        let timerSeconds = 0; // 0, 3, 5, 10
        
        // Certificate of Authenticity metadata
        let captureMetadata = null;
        
        // Events storage
        let postedEvents = [];
        
        // Cloudinary Pro Capture
        let cloudinaryWidget = null;
        let isProCapture = false;

        // Audio feedback
        const captureSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiDUIFmm98OScTgwOUKvm87FdFwlFnd7wvmEcBS1+zO/biS8IGWu58+SaTBELUrDn9LJeFgpFnN/xwGIdBTSAy+3ciSYII2y589+UTREKUbDk9LRZFQpGm+Dxvl0bBzN9y+7biSgHI2y589+URhIKUa/k9LdYFAtFm9/xwF4bCDR8yezfiSMHJG268t6URBMJUq/l9LdYEwlGnN/xwWAbCTN8ye3biB8GJW+68t2RQxIJUq7m9LlXEwtGnN/xwWAdCTN7ye3bhx0GJ2+88tyQQhIIUq3m9LpWEwpGnt/xwl8dCDN7yO3bhBwGKXC98tuNQBIIUq3m9LxWEQpGnt/xxGAdBzN6x+3agxsGKnG+9dqLPRAHUqzn9L5WEQlEnODxxWIcBzN5xu3ZgRoGK3G/9dmJOw8GUqvm9MBVEAlEnODxyGMcBjJ5xe3ZgBkGLHHB9tiIOQ4FUarm9MJUDwhEneDxymQcBjJ4xOzYfhgGLXHD9deHNg0FUajm9MRUDQdDneDxzGUcBTF4w+zYfRYGLnHE9daGMwwEUKjl9MZUDAdDnuHx0GYcBDB3w+vXfBUGMHHF9dWEMQsFT6fk9MhTCwZCnuHx0WgcAy94wuvXehQFMXLG9dSCLgoFTqfk9cpTCgVBneLx1GobAy53wOrWeBMFM3LI9dOAKQkFTaXj9M1SCQVBneLx1m0bAix2v+rVdRIFNXPJ9dJ+JwgFTKTi9NBRBwQ/nOPx2G4aASp1vunUcxEFN3TK9dF8JQcES6Ph9NJRBgQ+m+Tx2nAaASl0venTcg8EOXXL9dB6IwYESaPh9NRQBgM9muPx3HIaACh0vOjSbw4EOXbM9c94IQUDSKLg9NZPBgI8mePx33MZACd0u+fSbQwDO3fN9c13HwQDR6Hf9NhPBQE6mOLx4XUZACVzuubRagsEPHjO9cx1HQMCSKDe9NpOBQA5l+Hx5HYZACRyueXRaAkDPnnP9ct0GwMCRp/d9NxOBQA3leDx5ngZACNxuOTQZQgEQHrQ9cp0GgICRZ7d9N5NBQA2lN/x6HkZACJwt+PQYwcEQnvR9clyGAEBRJ3c9OBNBAA0k97x6noY//9vtuLPYQYDRHzS9shxFgEBQpvb9OJNBP8zkt7x7HsY//5uu+HPXwQDRn7T9sdwFAAAQZra8+RMAwAykdzy7nwY//5tu+DPXQIDSIDo');
        const recordStartSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiDUIFmm98OScTgwOUKvm87FdFwlFnd7wvmEcBS1+zO/biS8IGWu58+SaTBELUrDn9LJeFgpFnN/xwGIdBTSAy+3ciSYII2y589+UTREKUbDk9LRZFQpGm+Dxvl0bBzN9y+7biSgHI2y589+URhIKUa/k9LdYFAtFm9/xwF4bCDR8yezfiSMHJG268t6URBMJUq/l9LdYEwlGnN/xwWAbCTN8ye3biB8GJW+68t2RQxIJUq7m9LlXEwtGnN/xwWAdCTN7ye3bhx0GJ2+88tyQQhIIUq3m9LpWEwpGnt/xwl8dCDN7yO3bhBwGKXC98tuNQBIIUq3m9LxWEQpGnt/xxGAdBzN6x+3agxsGKnG+9dqLPRAHUqzn9L5WEQlEnODxxWIcBzN5xu3ZgRoGK3G/9dmJOw8GUqvm9MBVEAlEnODxyGMcBjJ5xe3ZgBkGLHHB9tiIOQ4FUarm9MJUDwhEneDxymQcBjJ4xOzYfhgGLXHD9deHNg0FUajm9MRUDQdDneDxzGUcBTF4w+zYfRYGLnHE9daGMwwEUKjl9MZUDAdDnuHx0GYcBDB3w+vXfBUGMHHF9dWEMQsFT6fk9MhTCwZCnuHx0WgcAy94wuvXehQFMXLG9dSCLgoFTqfk9cpTCgVBneLx1GobAy53wOrWeBMFM3LI9dOAKQkFTaXj9M1SCQVBneLx1m0bAix2v+rVdRIFNXPJ9dJ+JwgFTKTi9NBRBwQ/nOPx2G4aASp1vunUcxEFN3TK9dF8JQcES6Ph9NJRBgQ+m+Tx2nAaASl0venTcg8EOXXL9dB6IwYESaPh9NRQBgM9muPx3HIaACh0vOjSbw4EOXbM9c94IQUDSKLg9NZPBgI8mePx33MZACd0u+fSbQwDO3fN9c13HwQDR6Hf9NhPBQE6mOLx4XUZACVzuubRagsEPHjO9cx1HQMCSKDe9NpOBQA5l+Hx5HYZACRyueXRaAkDPnnP9ct0GwMCRp/d9NxOBQA3leDx5ngZACNxuOTQZQgEQHrQ9cp0GgICRZ7d9N5NBQA2lN/x6HkZACJwt+PQYwcEQnvR9clyGAEBRJ3c9OBNBAA0k97x6noY//9vtuLPYQYDRHzS9shxFgEBQpvb9OJNBP8zkt7x7HsY//5uu+HPXwQDRn7T9sdwFAAAQZra8+RMAwAykdzy7nwY//5tu+DPXQIDSIDo');
        const recordStopSound = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiDUIFmm98OScTgwOUKvm87FdFwlFnd7wvmEcBS1+zO/biS8IGWu58+SaTBELUrDn9LJeFgpFnN/xwGIdBTSAy+3ciSYII2y589+UTREKUbDk9LRZFQpGm+Dxvl0bBzN9y+7biSgHI2y589+URhIKUa/k9LdYFAtFm9/xwF4bCDR8yezfiSMHJG268t6URBMJUq/l9LdYEwlGnN/xwWAbCTN8ye3biB8GJW+68t2RQxIJUq7m9LlXEwtGnN/xwWAdCTN7ye3bhx0GJ2+88tyQQhIIUq3m9LpWEwpGnt/xwl8dCDN7yO3bhBwGKXC98tuNQBIIUq3m9LxWEQpGnt/xxGAdBzN6x+3agxsGKnG+9dqLPRAHUqzn9L5WEQlEnODxxWIcBzN5xu3ZgRoGK3G/9dmJOw8GUqvm9MBVEAlEnODxyGMcBjJ5xe3ZgBkGLHHB9tiIOQ4FUarm9MJUDwhEneDxymQcBjJ4xOzYfhgGLXHD9deHNg0FUajm9MRUDQdDneDxzGUcBTF4w+zYfRYGLnHE9daGMwwEUKjl9MZUDAdDnuHx0GYcBDB3w+vXfBUGMHHF9dWEMQsFT6fk9MhTCwZCnuHx0WgcAy94wuvXehQFMXLG9dSCLgoFTqfk9cpTCgVBneLx1GobAy53wOrWeBMFM3LI9dOAKQkFTaXj9M1SCQVBneLx1m0bAix2v+rVdRIFNXPJ9dJ+JwgFTKTi9NBRBwQ/nOPx2G4aASp1vunUcxEFN3TK9dF8JQcES6Ph9NJRBgQ+m+Tx2nAaASl0venTcg8EOXXL9dB6IwYESaPh9NRQBgM9muPx3HIaACh0vOjSbw4EOXbM9c94IQUDSKLg9NZPBgI8mePx33MZACd0u+fSbQwDO3fN9c13HwQDR6Hf9NhPBQE6mOLx4XUZACVzuubRagsEPHjO9cx1HQMCSKDe9NpOBQA5l+Hx5HYZACRyueXRaAkDPnnP9ct0GwMCRp/d9NxOBQA3leDx5ngZACNxuOTQZQgEQHrQ9cp0GgICRZ7d9N5NBQA2lN/x6HkZACJwt+PQYwcEQnvR9clyGAEBRJ3c9OBNBAA0k97x6noY//9vtuLPYQYDRHzS9shxFgEBQpvb9OJNBP8zkt7x7HsY//5uu+HPXwQDRn7T9sdwFAAAQZra8+RMAwAykdzy7nwY//5tu+DPXQIDSIDo');

        // Mock Data (Replace with real backend)
        let auctions = [
            {
                id: 1,
                creator: 'NewsHunter',
                description: 'Breaking: First look at the new city hall construction. Exclusive angle from restricted area.',
                mediaUrl: 'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=600',
                mediaType: 'image',
                currentBid: 47,
                bidCount: 12,
                endTime: Date.now() + 2400000, // 40 min from now
                timestamp: Date.now() - 1200000
            },
            {
                id: 2,
                creator: 'StreetPhotog',
                description: 'Rare red Ferrari F40 spotted downtown. Owner agreed to quick photoshoot. Collectors interested?',
                mediaUrl: 'https://images.unsplash.com/photo-1583121274602-3e2820c69888?w=600',
                mediaType: 'image',
                currentBid: 23,
                bidCount: 8,
                endTime: Date.now() + 1800000, // 30 min from now
                timestamp: Date.now() - 1800000
            },
            {
                id: 3,
                creator: 'EventCapture',
                description: 'Live performance clip from tonight concert. Lead singer surprise acoustic set. 45 seconds.',
                mediaUrl: 'https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=600',
                mediaType: 'video',
                currentBid: 89,
                bidCount: 24,
                endTime: Date.now() + 3300000, // 55 min from now
                timestamp: Date.now() - 300000
            }
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Try to restore user session from localStorage
            const savedUser = localStorage.getItem('reelauction_user');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    updateUserInterface();
                    showSection('dashboardSection');
                    console.log('Session restored:', currentUser.name);
                } catch (error) {
                    console.error('Failed to restore session:', error);
                    localStorage.removeItem('reelauction_user');
                }
            }
            
            loadAuctions();
            setupEventListeners();
            startAuctionTimers();
        });

        function setupEventListeners() {
            // Forms
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            document.getElementById('eventForm').addEventListener('submit', handlePostEvent);

            // Character counters
            document.getElementById('contentDescription')?.addEventListener('input', (e) => {
                document.getElementById('charCount').textContent = e.target.value.length;
            });
            document.getElementById('eventDescription')?.addEventListener('input', (e) => {
                document.getElementById('eventCharCount').textContent = e.target.value.length;
            });

            // Capture button
            document.getElementById('captureBtn')?.addEventListener('click', handleCapture);
            
            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                const mobileNav = document.getElementById('mobileNav');
                const hamburger = document.getElementById('hamburgerBtn');
                if (mobileNav.classList.contains('active') && 
                    !mobileNav.contains(e.target) && 
                    !hamburger.contains(e.target)) {
                    mobileNav.classList.remove('active');
                }
            });
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            // Load events when showing events section
            if (sectionId === 'eventsSection') {
                loadEvents();
            }
            
            // Load admin dashboard when showing admin section
            if (sectionId === 'adminDashboardSection') {
                loadAdminDashboard();
            }
            
            // Close mobile nav when navigating
            document.getElementById('mobileNav').classList.remove('active');
        }
        
        function toggleMobileNav() {
            document.getElementById('mobileNav').classList.toggle('active');
        }
        
        function switchDashboardTab(tabName) {
            // Update active tab
            activeDashboardTab = tabName;
            document.querySelectorAll('.dashboard-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show corresponding content
            document.querySelectorAll('.dashboard-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + 'Content').classList.add('active');
            
            // Load content for the tab
            loadDashboardContent(tabName);
        }
        
        function loadDashboardContent(tabName) {
            if (!currentUser) return;
            
            if (tabName === 'myListings') {
                const userListings = auctions.filter(a => a.creator === currentUser.name);
                const container = document.getElementById('userListingsContainer');
                
                if (userListings.length === 0) {
                    container.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 2rem;">You have not created any content yet. Start capturing!</p>';
                } else {
                    container.innerHTML = userListings.map(auction => `
                        <div class="listing-card">
                            <div class="listing-header">
                                <div style="flex: 1;">
                                    <div style="font-weight: 700; margin-bottom: 0.5rem;">${auction.description}</div>
                                    <div style="color: var(--text-secondary); font-size: 0.875rem;">
                                        Current bid: <span style="color: var(--accent-gold); font-weight: 700;">$${auction.currentBid}</span> 
                                        ‚Ä¢ ${auction.bidCount} bids
                                    </div>
                                    ${auction.bidCount > 0 ? `<div style="color: var(--text-secondary); font-size: 0.75rem; margin-top: 0.25rem;">‚ö†Ô∏è ${auction.bidCount} active bidder${auction.bidCount > 1 ? 's' : ''} will be notified if cancelled</div>` : ''}
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <div class="listing-status ${auction.endTime > Date.now() ? 'active' : 'ended'}">
                                        ${auction.endTime > Date.now() ? 'ACTIVE' : 'ENDED'}
                                    </div>
                                    ${auction.endTime > Date.now() ? `
                                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: var(--error); border-color: var(--error);" onclick="confirmCancelListing(${auction.id})">
                                            Cancel Listing
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            } else if (tabName === 'myBids') {
                const container = document.getElementById('userBidsContainer');
                const userBidAuctions = auctions.filter(a => userBids.includes(a.id));
                
                if (userBidAuctions.length === 0) {
                    container.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 2rem;">You have not placed any bids yet.</p>';
                } else {
                    container.innerHTML = userBidAuctions.map(auction => `
                        <div class="listing-card" onclick="openAuctionModal(${auction.id})">
                            <div class="listing-header">
                                <div>
                                    <div style="font-weight: 700; margin-bottom: 0.5rem;">${auction.description}</div>
                                    <div style="color: var(--text-secondary); font-size: 0.875rem;">
                                        Current bid: <span style="color: var(--accent-gold); font-weight: 700;">$${auction.currentBid}</span>
                                        ${auction.currentBidderId === currentUser.id ? ' ‚Ä¢ <span style="color: var(--success);">You are winning!</span>' : ''}
                                    </div>
                                </div>
                                <div class="listing-status ${auction.endTime > Date.now() ? 'active' : 'ended'}">
                                    ${auction.endTime > Date.now() ? 'ACTIVE' : 'ENDED'}
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }
        }
        
        function confirmCancelListing(auctionId) {
            const auction = auctions.find(a => a.id === auctionId);
            if (!auction) return;
            
            const modal = document.getElementById('auctionModal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <button class="modal-close" onclick="closeModal()">‚úï</button>
                <div style="text-align: center; padding: 2rem 1rem;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö†Ô∏è</div>
                    <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 1.75rem; margin-bottom: 1rem;">
                        Cancel This Listing?
                    </h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">
                        "${auction.description}"
                    </p>
                    ${auction.bidCount > 0 ? `
                        <div style="background: rgba(255, 61, 0, 0.1); border: 2px solid var(--accent-fire); border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem;">
                            <p style="color: var(--accent-fire); font-weight: 700; margin-bottom: 0.5rem;">
                                ‚ö†Ô∏è Active Bidders Will Be Notified
                            </p>
                            <p style="font-size: 0.875rem; color: var(--text-secondary);">
                                ${auction.bidCount} bidder${auction.bidCount > 1 ? 's' : ''} will receive a notification that you cancelled this auction. Current bid: $${auction.currentBid}
                            </p>
                        </div>
                    ` : ''}
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button class="btn btn-ghost" onclick="closeModal()">
                            Keep Listing
                        </button>
                        <button class="btn btn-primary" style="background: var(--error); border-color: var(--error);" onclick="cancelListing(${auctionId})">
                            Yes, Cancel Listing
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.add('active');
        }
        
        function cancelListing(auctionId) {
            const auctionIndex = auctions.findIndex(a => a.id === auctionId);
            if (auctionIndex === -1) return;
            
            const auction = auctions[auctionIndex];
            
            // Log notification for bidders (in production, send actual notifications)
            if (auction.bidCount > 0) {
                console.log(`NOTIFICATION: Auction #${auctionId} cancelled by creator. ${auction.bidCount} bidder(s) notified.`);
                console.log(`Message: "The auction for '${auction.description}' has been cancelled by the creator."`);
            }
            
            // Remove auction from array
            auctions.splice(auctionIndex, 1);
            
            closeModal();
            showStatus('Listing cancelled successfully', 'success');
            
            // Refresh dashboard and main auction view
            loadDashboardContent('myListings');
            loadAuctions();
        }
        
        // Admin Dashboard Functions
        function loadAdminDashboard() {
            if (!currentUser || !currentUser.isAdmin) {
                showStatus('Admin access required', 'error');
                showSection('dashboardSection');
                return;
            }
            
            // Calculate stats
            const totalAuctions = auctions.length;
            const activeAuctions = auctions.filter(a => a.endTime > Date.now()).length;
            const totalBids = auctions.reduce((sum, a) => sum + a.bidCount, 0);
            const totalVolume = auctions.reduce((sum, a) => sum + a.currentBid, 0);
            const platformRevenue = totalVolume * 0.20;
            const premiumUsers = 1; // Mock - would count from user database
            
            // Update stats
            document.getElementById('adminTotalAuctions').textContent = totalAuctions;
            document.getElementById('adminActiveAuctions').textContent = activeAuctions;
            document.getElementById('adminTotalBids').textContent = totalBids;
            document.getElementById('adminTotalVolume').textContent = `$${totalVolume.toFixed(2)}`;
            document.getElementById('adminPlatformRevenue').textContent = `$${platformRevenue.toFixed(2)}`;
            document.getElementById('adminPremiumUsers').textContent = premiumUsers;
            
            // Load auctions for moderation
            loadAdminAuctions();
            
            // Load activity log
            loadActivityLog();
        }
        
        function loadAdminAuctions() {
            const container = document.getElementById('adminAuctionsList');
            
            if (auctions.length === 0) {
                container.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 2rem;">No auctions to moderate</p>';
                return;
            }
            
            const sortedAuctions = [...auctions].sort((a, b) => b.id - a.id); // Newest first
            
            container.innerHTML = sortedAuctions.map(auction => `
                <div style="background: var(--bg-dark); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
                        <div style="flex: 1;">
                            <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 0.5rem;">
                                <span style="font-family: monospace; color: var(--text-secondary); font-size: 0.75rem;">#${auction.id}</span>
                                <span style="font-weight: 700;">${auction.description}</span>
                                ${auction.isPremiumContent ? '<span class="premium-badge" style="font-size: 0.7rem; padding: 0.25rem 0.5rem;">‚≠ê PREMIUM</span>' : ''}
                                ${auction.certificateMetadata ? '<span style="font-size: 0.7rem; padding: 0.25rem 0.5rem; background: rgba(255, 215, 0, 0.2); color: var(--accent-gold); border-radius: 4px;">üèÜ CERTIFIED</span>' : ''}
                            </div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary); display: flex; gap: 1.5rem; flex-wrap: wrap;">
                                <span>Creator: <strong>@${auction.creator}</strong></span>
                                <span>Bid: <strong style="color: var(--accent-gold);">$${auction.currentBid}</strong></span>
                                <span>Bids: <strong>${auction.bidCount}</strong></span>
                                <span>Status: <strong style="color: ${auction.endTime > Date.now() ? 'var(--success)' : 'var(--text-secondary)'};">${auction.endTime > Date.now() ? 'ACTIVE' : 'ENDED'}</strong></span>
                                <span>Type: <strong>${auction.mediaType}</strong></span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.85rem;" onclick="openAuctionModal(${auction.id})">
                                View
                            </button>
                            <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.85rem; background: var(--error); border-color: var(--error);" onclick="adminRemoveListing(${auction.id})">
                                Remove
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function adminRemoveListing(auctionId) {
            if (!confirm('Admin: Remove this listing? This action cannot be undone.')) return;
            
            const auctionIndex = auctions.findIndex(a => a.id === auctionId);
            if (auctionIndex === -1) return;
            
            const auction = auctions[auctionIndex];
            
            // Log for activity
            console.log(`ADMIN ACTION: Removed auction #${auctionId} - "${auction.description}" by @${auction.creator}`);
            
            // Notify affected users (mock)
            if (auction.bidCount > 0) {
                console.log(`NOTIFICATION: ${auction.bidCount} bidder(s) notified that listing was removed by admin.`);
            }
            
            auctions.splice(auctionIndex, 1);
            showStatus('Listing removed by admin', 'success');
            loadAdminDashboard();
            loadAuctions();
        }
        
        function loadActivityLog() {
            const container = document.getElementById('adminActivityLog');
            
            // Mock activity log (in production, this would come from backend)
            const activities = [
                { time: new Date(), action: 'Auction #1 created by @NewsHunter', type: 'auction' },
                { time: new Date(Date.now() - 300000), action: 'Bid placed on Auction #2: $47', type: 'bid' },
                { time: new Date(Date.now() - 600000), action: 'User @StreetPhotog upgraded to Premium', type: 'premium' },
                { time: new Date(Date.now() - 900000), action: 'Auction #3 ended - Winner: @Collector123', type: 'auction' },
                { time: new Date(Date.now() - 1200000), action: 'New user registered: @NewPhotographer', type: 'user' }
            ];
            
            container.innerHTML = activities.map(activity => {
                const timeStr = activity.time.toLocaleTimeString();
                const color = {
                    auction: 'var(--accent-fire)',
                    bid: 'var(--accent-gold)',
                    premium: 'var(--success)',
                    user: 'var(--info)'
                }[activity.type];
                
                return `<div style="padding: 0.5rem; border-bottom: 1px solid var(--border); display: flex; gap: 1rem;">
                    <span style="color: ${color}; min-width: 80px;">[${timeStr}]</span>
                    <span>${activity.action}</span>
                </div>`;
            }).join('');
        }
        
        // ========================================
        // NATIVE CAMERA CAPTURE + CLOUDINARY UPLOAD
        // Direct camera access - no widget UI!
        // ========================================
        
        async function openProCapture() {
            if (!currentUser) {
                showStatus('Please login to create content', 'error');
                showSection('loginSection');
                return;
            }
            
            isProCapture = true;
            
            try {
                // Request camera/microphone access
                showStatus('üì∏ Opening camera...', 'info');
                
                // Use native file input with camera capture
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*,video/*';
                input.capture = 'environment'; // Use back camera
                
                input.onchange = async (e) => {
                    const file = e.target.files[0];
                    if (!file) {
                        showStatus('No file selected', 'error');
                        return;
                    }
                    
                    // Show uploading status
                    showStatus('üì§ Uploading to cloud...', 'info');
                    
                    // Upload to Cloudinary
                    await uploadToCloudinary(file);
                };
                
                // Trigger file picker (opens camera on mobile)
                input.click();
                
            } catch (error) {
                console.error('Camera error:', error);
                showStatus('Camera access denied. Please enable camera permissions.', 'error');
            }
        }
        
        async function uploadToCloudinary(file) {
            console.log('uploadToCloudinary called with file:', file);
            
            try {
                const formData = new FormData();
                formData.append('file', file);
                formData.append('upload_preset', 'pro_capture');
                formData.append('cloud_name', 'dtfymlzzr');
                
                // Detect if it's a video or image
                const resourceType = file.type.startsWith('video/') ? 'video' : 'image';
                console.log('Resource type:', resourceType);
                
                const uploadUrl = `https://api.cloudinary.com/v1_1/dtfymlzzr/${resourceType}/upload`;
                console.log('Uploading to:', uploadUrl);
                
                const response = await fetch(uploadUrl, {
                    method: 'POST',
                    body: formData
                });
                
                console.log('Upload response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('Upload failed with status:', response.status, errorText);
                    throw new Error('Upload failed: ' + errorText);
                }
                
                const data = await response.json();
                console.log('Upload successful! Data:', data);
                
                // Process the uploaded file
                await handleCloudinaryUpload(null, {
                    event: 'success',
                    info: {
                        resource_type: resourceType,
                        secure_url: data.secure_url,
                        created_at: data.created_at,
                        etag: data.etag,
                        width: data.width,
                        height: data.height,
                        duration: data.duration,
                        image_metadata: data.image_metadata || {},
                        public_id: data.public_id
                    }
                });
                
            } catch (error) {
                console.error('Upload error:', error);
                showStatus('Upload failed. Please try again. Error: ' + error.message, 'error');
            }
        }
        
        async function handleCloudinaryUpload(error, result) {
            console.log('handleCloudinaryUpload called', { error, result });
            
            if (error) {
                console.error('Cloudinary upload error:', error);
                showStatus('Upload failed. Please try again.', 'error');
                return;
            }
            
            if (result && result.event === 'success') {
                const info = result.info;
                console.log('Upload successful, info:', info);
                
                const mediaType = info.resource_type; // 'image' or 'video'
                const mediaUrl = info.secure_url;
                
                // Validate timestamp (server-side, can't fake!)
                const uploadedAt = new Date(info.created_at);
                const secondsAgo = (Date.now() - uploadedAt) / 1000;
                
                console.log('Timestamp validation:', { uploadedAt, secondsAgo });
                
                // Make validation more lenient (5 minutes instead of 60 seconds)
                if (secondsAgo > 300) {
                    console.warn('Content older than 5 minutes:', secondsAgo);
                    showStatus('Content must be uploaded within 5 minutes of capture', 'error');
                    return;
                }
                
                // Check for duplicates using Cloudinary's unique hash
                const imageHash = info.etag || info.public_id;
                const isDuplicate = auctions.some(a => a.certificateMetadata && a.certificateMetadata.hash === imageHash);
                
                console.log('Duplicate check:', { imageHash, isDuplicate });
                
                if (isDuplicate) {
                    showStatus('This content has already been uploaded', 'error');
                    return;
                }
                
                // Extract EXIF metadata if available
                const exifData = info.image_metadata || {};
                const gps = {
                    lat: exifData.GPSLatitude || null,
                    lng: exifData.GPSLongitude || null
                };
                
                // If no GPS in EXIF, try to get current location
                if (!gps.lat || !gps.lng) {
                    try {
                        const position = await getCurrentPosition();
                        gps.lat = position.coords.latitude;
                        gps.lng = position.coords.longitude;
                        console.log('GPS from geolocation:', gps);
                    } catch (e) {
                        console.log('GPS not available:', e);
                    }
                }
                
                // Create enhanced certificate metadata
                captureMetadata = {
                    timestamp: info.created_at,
                    uploadTimestamp: uploadedAt.toISOString(),
                    gps: gps,
                    hash: imageHash,
                    camera: exifData.Make ? `${exifData.Make} ${exifData.Model || ''}`.trim() : 'Unknown',
                    verified: true,
                    serverTimestamp: true, // Flag that this is server-verified
                    isoPro: exifData.ISOSpeed,
                    aperture: exifData.FNumber,
                    shutterSpeed: exifData.ExposureTime,
                    focalLength: exifData.FocalLength,
                    width: info.width,
                    height: info.height,
                    duration: info.duration || null // For videos
                };
                
                console.log('Certificate metadata created:', captureMetadata);
                
                // Set the media URL (Cloudinary CDN URL)
                capturedBlob = mediaUrl;
                
                console.log('About to show preview and form...');
                
                // Show the camera preview section with captured content
                document.getElementById('cameraPreviewSection').style.display = 'block';
                
                // Show success based on media type
                if (mediaType === 'video') {
                    console.log('Displaying video...');
                    // Show video success overlay
                    document.getElementById('videoSuccessOverlay').style.display = 'flex';
                    
                    // Also set the actual video element
                    const videoEl = document.getElementById('capturedMedia');
                    videoEl.src = mediaUrl;
                    videoEl.controls = true;
                    videoEl.style.display = 'block';
                    videoEl.style.objectFit = 'contain';
                    
                    // Hide the success overlay after 2 seconds
                    setTimeout(() => {
                        document.getElementById('videoSuccessOverlay').style.display = 'none';
                    }, 2000);
                } else {
                    console.log('Displaying image...');
                    // Show photo
                    const imgEl = document.getElementById('capturedMedia');
                    imgEl.src = mediaUrl;
                    imgEl.style.display = 'block';
                    imgEl.style.objectFit = 'contain';
                    document.getElementById('videoPreview').style.display = 'none';
                }
                
                console.log('Showing content form...');
                // Show content form prominently
                document.getElementById('contentForm').style.display = 'block';
                
                // Scroll to the form so user sees it
                setTimeout(() => {
                    console.log('Scrolling to form...');
                    document.getElementById('contentForm').scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'start' 
                    });
                }, 500);
                
                // Set premium starting bid option if user is premium
                if (currentUser.isPremium) {
                    document.getElementById('startingBidGroup').style.display = 'block';
                }
                
                showStatus(`‚úì ${mediaType === 'video' ? 'Video' : 'Photo'} captured! Add description to list.`, 'success');
                
                console.log('Pro Capture Metadata:', captureMetadata);
            }
        }
        
        function getCurrentPosition() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('Geolocation not supported'));
                    return;
                }
                navigator.geolocation.getCurrentPosition(resolve, reject, {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 0
                });
            });
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            // Mock authentication (replace with real backend)
            currentUser = {
                id: 1,
                name: email.split('@')[0],
                email: email,
                role: 'creator',
                balance: 125.50,
                isPremium: false,
                isAdmin: email === 'admin@reelauction.com' // Admin access for this email
            };

            // Save user to localStorage for session persistence
            localStorage.setItem('reelauction_user', JSON.stringify(currentUser));

            updateUserInterface();
            showSection('dashboardSection');
            showStatus(currentUser.isAdmin ? 'Welcome back, Admin!' : 'Welcome back!', 'success');
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const role = document.getElementById('regRole').value;

            // Mock registration (replace with real backend)
            currentUser = {
                id: Date.now(),
                name: name,
                email: email,
                role: role,
                balance: 0,
                isPremium: false
            };

            // Save user to localStorage for session persistence
            localStorage.setItem('reelauction_user', JSON.stringify(currentUser));

            updateUserInterface();
            showSection('dashboardSection');
            showStatus('Account created! Welcome to ReelAuction.', 'success');
        }

        function handleLogout() {
            currentUser = null;
            
            // Clear localStorage on logout
            localStorage.removeItem('reelauction_user');
            
            updateUserInterface();
            showSection('landingSection');
            showStatus('Logged out successfully', 'info');
        }

        function updateUserInterface() {
            if (currentUser) {
                // Don't show user info in header - it's in hamburger menu instead
                document.getElementById('hamburgerBtn').style.display = 'flex';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userBalance').textContent = `$${currentUser.balance.toFixed(2)}`;
                document.getElementById('userRole').textContent = currentUser.role.toUpperCase();

                // Show admin dashboard if user is admin
                if (currentUser.isAdmin) {
                    document.getElementById('navAdminDashboard').style.display = 'block';
                } else {
                    document.getElementById('navAdminDashboard').style.display = 'none';
                }

                // Show menu items based on role
                if (currentUser.role === 'creator' || currentUser.role === 'both') {
                    document.getElementById('navCreateContent').style.display = 'block';
                    document.getElementById('creatorQuickActions').style.display = 'block';
                    
                    if (currentUser.isPremium) {
                        document.getElementById('navPostEvent').style.display = 'block';
                        document.getElementById('navUpgrade').style.display = 'none';
                        document.getElementById('premiumTab').style.display = 'block';
                    } else {
                        document.getElementById('navPostEvent').style.display = 'none';
                        document.getElementById('navUpgrade').style.display = 'block';
                        document.getElementById('premiumTab').style.display = 'none';
                    }
                } else {
                    document.getElementById('navCreateContent').style.display = 'none';
                    document.getElementById('creatorQuickActions').style.display = 'none';
                }
            } else {
                document.getElementById('hamburgerBtn').style.display = 'none';
                document.getElementById('navCreateContent').style.display = 'none';
                document.getElementById('navPostEvent').style.display = 'none';
                document.getElementById('navUpgrade').style.display = 'none';
                document.getElementById('navAdminDashboard').style.display = 'none';
                document.getElementById('creatorQuickActions').style.display = 'none';
            }
        }

        function loadAuctions() {
            const container = document.getElementById('auctionsContainer');
            
            if (auctions.length === 0) {
                container.innerHTML = '<div class="loading"><p>No active auctions right now. Check back soon!</p></div>';
                return;
            }

            const now = Date.now();
            
            // Categorize auctions
            const expiringSoon = auctions.filter(a => (a.endTime - now) < 21600000).sort((a, b) => a.endTime - b.endTime); // < 6 hours
            const popular = auctions.filter(a => a.bidCount >= Math.max(...auctions.map(x => x.bidCount)) * 0.1).sort((a, b) => b.bidCount - a.bidCount).slice(0, 10); // Top 10% by bids
            const remaining = auctions.filter(a => !expiringSoon.includes(a) && !popular.includes(a)).sort((a, b) => a.endTime - b.endTime);

            let html = '';
            
            // Expiring Soon Section
            if (expiringSoon.length > 0) {
                html += `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--accent-fire); display: flex; align-items: center; gap: 0.5rem;">
                            ‚è∞ Expiring Soon
                            <span style="font-size: 0.75rem; background: var(--accent-fire); color: white; padding: 0.25rem 0.75rem; border-radius: 100px; font-weight: 700;">${expiringSoon.length}</span>
                        </h3>
                        <div class="auction-grid">
                            ${renderAuctions(expiringSoon)}
                        </div>
                    </div>
                `;
            }
            
            // Popular Listings Section
            if (popular.length > 0) {
                html += `
                    <div style="margin-bottom: 2rem;">
                        <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--accent-gold); display: flex; align-items: center; gap: 0.5rem;">
                            üî• Popular Listings
                            <span style="font-size: 0.75rem; background: var(--accent-gold); color: #000; padding: 0.25rem 0.75rem; border-radius: 100px; font-weight: 700;">${popular.length}</span>
                        </h3>
                        <div class="auction-grid">
                            ${renderAuctions(popular)}
                        </div>
                    </div>
                `;
            }
            
            // All Other Auctions
            if (remaining.length > 0) {
                html += `
                    <div>
                        <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--text-primary); display: flex; align-items: center; gap: 0.5rem;">
                            üìã All Auctions
                            <span style="font-size: 0.75rem; background: var(--bg-dark); color: var(--text-secondary); padding: 0.25rem 0.75rem; border-radius: 100px; font-weight: 700;">${remaining.length}</span>
                        </h3>
                        <div class="auction-grid">
                            ${renderAuctions(remaining)}
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        function renderAuctions(auctionList) {
            return auctionList.map(auction => `
                <div class="auction-card" onclick="openAuctionModal(${auction.id})">
                    <div class="auction-media">
                        ${auction.mediaType === 'image' 
                            ? `<img src="${auction.mediaUrl}" alt="${auction.description}">`
                            : `<video src="${auction.mediaUrl}" muted loop autoplay playsinline></video>`
                        }
                        <div class="watermark">REELAUCTION</div>
                        ${auction.isPremiumContent && auction.startingBid > 1 
                            ? `<div style="position: absolute; top: 1rem; right: 1rem; background: linear-gradient(135deg, var(--accent-gold), #ffed4e); color: #000; padding: 0.25rem 0.75rem; border-radius: 100px; font-size: 0.7rem; font-weight: 700;">‚≠ê PREMIUM</div>`
                            : ''
                        }
                        ${auction.certificateMetadata 
                            ? `<div style="position: absolute; top: 1rem; left: 1rem; background: rgba(0, 0, 0, 0.8); color: var(--accent-gold); padding: 0.25rem 0.75rem; border-radius: 100px; font-size: 0.7rem; font-weight: 700; border: 1px solid var(--accent-gold);">üèÜ CERTIFIED</div>`
                            : ''
                        }
                    </div>
                    <div class="auction-info">
                        <div class="auction-description">${auction.description}</div>
                        <div class="auction-meta">
                            <div>
                                <div class="current-bid">$${auction.currentBid}</div>
                                <div class="bid-count">${auction.bidCount} bids${auction.startingBid > 1 ? ` ‚Ä¢ Started at $${auction.startingBid}` : ''}</div>
                                <div style="color: var(--accent-fire); font-size: 0.875rem; font-weight: 700; margin-top: 0.25rem;">
                                    <span style="font-size: 0.75rem; color: var(--text-secondary);">Time Remaining:</span> 
                                    <span class="auction-timer" data-end="${auction.endTime}">--:--</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.85rem;" onclick="event.stopPropagation(); placeBid(${auction.id})">
                                Bid
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function filterAuctions() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (!searchTerm) {
                loadAuctions();
                return;
            }
            
            const container = document.getElementById('auctionsContainer');
            const filteredAuctions = auctions.filter(auction => 
                auction.description.toLowerCase().includes(searchTerm) ||
                auction.creator.toLowerCase().includes(searchTerm)
            );
            
            if (filteredAuctions.length === 0) {
                container.innerHTML = '<div class="loading"><p>No auctions match your search.</p></div>';
                return;
            }
            
            // Sort by time remaining
            const sortedAuctions = [...filteredAuctions].sort((a, b) => a.endTime - b.endTime);

            container.innerHTML = `
                <div>
                    <h3 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 1rem; color: var(--text-primary);">
                        Search Results
                        <span style="font-size: 0.75rem; background: var(--bg-dark); color: var(--text-secondary); padding: 0.25rem 0.75rem; border-radius: 100px; font-weight: 700; margin-left: 0.5rem;">${sortedAuctions.length}</span>
                    </h3>
                    <div class="auction-grid">
                        ${renderAuctions(sortedAuctions)}
                    </div>
                </div>
            `;
        }

        function startAuctionTimers() {
            setInterval(() => {
                document.querySelectorAll('.auction-timer').forEach(timer => {
                    const endTime = parseInt(timer.dataset.end);
                    const remaining = Math.max(0, endTime - Date.now());
                    const hours = Math.floor(remaining / 3600000);
                    const minutes = Math.floor((remaining % 3600000) / 60000);
                    const seconds = Math.floor((remaining % 60000) / 1000);
                    timer.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (remaining === 0) {
                        timer.textContent = 'ENDED';
                        timer.style.color = 'var(--text-secondary)';
                    }
                });
            }, 1000);
        }

        function openAuctionModal(auctionId) {
            const auction = auctions.find(a => a.id === auctionId);
            if (!auction) return;
            
            const isOwnListing = currentUser && auction.creator === currentUser.name;

            const modal = document.getElementById('auctionModal');
            const content = document.getElementById('modalContent');
            
            let bidSection = '';
            if (!currentUser) {
                bidSection = `
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px; border: 2px solid var(--accent-fire);">
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">Login to place a bid</p>
                        <button class="btn btn-primary" onclick="closeModal(); showSection('loginSection')">
                            Login
                        </button>
                    </div>`;
            } else if (isOwnListing) {
                bidSection = `
                    <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px; border: 2px solid var(--border);">
                        <p style="color: var(--text-secondary); margin-bottom: 0.5rem;">This is your listing</p>
                        <p style="color: var(--text-secondary); font-size: 0.875rem;">You cannot bid on your own content</p>
                    </div>`;
            } else {
                bidSection = `
                    <button class="btn btn-primary" style="width: 100%;" onclick="placeBid(${auction.id}, true)">
                        Place Bid - $${auction.currentBid + 1}
                    </button>`;
            }

            content.innerHTML = `
                <button class="modal-close" onclick="closeModal()">‚úï</button>
                
                <div style="margin-bottom: 1.5rem; padding-right: 3rem;">
                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem;">
                        Posted by @${auction.creator}
                    </div>
                    <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 1.5rem; margin-bottom: 0.5rem; line-height: 1.3;">
                        ${auction.description}
                    </h2>
                </div>

                <div class="modal-media-container">
                    ${auction.mediaType === 'image' 
                        ? `<img src="${auction.mediaUrl}">`
                        : `<video src="${auction.mediaUrl}" controls playsinline></video>`
                    }
                    <div class="watermark">REELAUCTION</div>
                </div>

                <div style="background: var(--bg-dark); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Current Bid</div>
                            <div style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; color: var(--accent-gold);">
                                $${auction.currentBid}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Time Left</div>
                            <div class="auction-timer" data-end="${auction.endTime}" style="position: static; background: none; padding: 0; font-size: 1.25rem; font-weight: 700; color: var(--accent-fire);"></div>
                        </div>
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem;">${auction.bidCount} bids ‚Ä¢ Next bid: $${auction.currentBid + 1}</div>
                </div>

                ${bidSection}
                
                <!-- Value Proposition Section -->
                <div style="background: linear-gradient(135deg, rgba(255, 61, 0, 0.1), rgba(255, 215, 0, 0.1)); border: 2px solid var(--accent-gold); border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem;">
                    <div style="font-weight: 700; color: var(--accent-gold); margin-bottom: 1rem; font-size: 1rem;">
                        üèÜ What You're Buying
                    </div>
                    <div style="display: grid; gap: 0.75rem; font-size: 0.875rem;">
                        <div style="display: flex; gap: 0.5rem;">
                            <span style="color: var(--success);">‚úì</span>
                            <span><strong>One-of-One Ownership:</strong> This is the ONLY unwatermarked copy in existence</span>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <span style="color: var(--success);">‚úì</span>
                            <span><strong>Certificate of Authenticity:</strong> GPS-verified, timestamped, cryptographically signed</span>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <span style="color: var(--success);">‚úì</span>
                            <span><strong>Full Commercial Rights:</strong> Use for news, marketing, resale, or archival</span>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <span style="color: var(--success);">‚úì</span>
                            <span><strong>Verified Authenticity:</strong> Captured live in-app, no uploads allowed</span>
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <span style="color: var(--success);">‚úì</span>
                            <span><strong>Instant Delivery:</strong> Content + certificate delivered immediately upon winning</span>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-ghost" style="width: 100%; margin-top: 1rem;" onclick="closeModal()">
                    Close
                </button>
            `;

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('auctionModal').classList.remove('active');
        }

        function placeBid(auctionId, fromModal = false) {
            if (!currentUser) {
                showStatus('Please login to place a bid', 'error');
                return;
            }

            const auction = auctions.find(a => a.id === auctionId);
            if (!auction) return;

            // Prevent bidding on own listings
            if (auction.creator === currentUser.name) {
                showStatus('You cannot bid on your own content', 'error');
                return;
            }
            
            // Prevent bidding if already winning
            if (auction.currentBidderId === currentUser.id) {
                showStatus('You are already the highest bidder! üéâ', 'info');
                return;
            }

            // Mock bid placement
            auction.currentBid += 1;
            auction.bidCount += 1;
            auction.currentBidderId = currentUser.id;
            
            // Track this bid
            if (!userBids.includes(auctionId)) {
                userBids.push(auctionId);
            }

            loadAuctions();
            if (fromModal) {
                closeModal();
            }
            showStatus(`Bid placed! You're the highest bidder at $${auction.currentBid}`, 'success');
        }

        // Camera Functions
        async function initCamera() {
            try {
                if (mediaStream) {
                    mediaStream.getTracks().forEach(track => track.stop());
                }

                // Get resolution constraints
                let width, height;
                switch (selectedResolution) {
                    case '720p':
                        width = 1280;
                        height = 720;
                        break;
                    case '1080p':
                        width = 1920;
                        height = 1080;
                        break;
                    case '4K':
                        width = 3840;
                        height = 2160;
                        break;
                }

                // Adjust for aspect ratio
                if (selectedAspectRatio === '1:1') {
                    height = width; // Square
                } else if (selectedAspectRatio === '9:16') {
                    // Vertical - swap dimensions
                    [width, height] = [height, width];
                }

                const constraints = {
                    video: {
                        facingMode: currentCamera,
                        width: { ideal: width },
                        height: { ideal: height },
                        frameRate: { ideal: 30 }
                    },
                    audio: mediaType === 'video'
                };

                mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
                document.getElementById('videoPreview').srcObject = mediaStream;
                document.getElementById('videoPreview').style.display = 'block';
                document.getElementById('capturedMedia').style.display = 'none';
                
                // Check if flash/torch is available
                const track = mediaStream.getVideoTracks()[0];
                const capabilities = track.getCapabilities();
                if (capabilities.torch) {
                    document.getElementById('flashRow').style.display = 'flex';
                }
                
            } catch (error) {
                console.error('Camera error:', error);
                showStatus('Camera access denied. Please enable camera permissions.', 'error');
            }
        }

        function switchCamera() {
            currentCamera = currentCamera === 'user' ? 'environment' : 'user';
            initCamera();
        }
        
        function toggleMediaType() {
            mediaType = mediaType === 'photo' ? 'video' : 'photo';
            const btn = document.getElementById('mediaTypeBtn');
            btn.innerHTML = mediaType === 'photo' ? 'üì∑' : 'üé•';
            btn.style.background = mediaType === 'video' ? 'var(--accent-fire)' : 'var(--bg-dark)';
            btn.style.color = mediaType === 'video' ? 'white' : 'var(--text-primary)';
            initCamera();
        }
        
        // Settings Functions
        function changeResolution() {
            selectedResolution = document.getElementById('resolutionSelect').value;
            initCamera();
            
            const sizeWarning = {
                '720p': '~5MB per minute',
                '1080p': '~10MB per minute',
                '4K': '~30MB per minute'
            };
            showStatus(`Resolution: ${selectedResolution} (${sizeWarning[selectedResolution]})`, 'info');
        }
        
        function changeAspectRatio() {
            selectedAspectRatio = document.getElementById('aspectRatioSelect').value;
            initCamera();
        }
        
        function toggleGrid() {
            showGrid = !showGrid;
            const gridOverlay = document.getElementById('gridOverlay');
            const gridButton = document.getElementById('gridToggle');
            
            if (showGrid) {
                gridOverlay.classList.add('active');
                gridButton.classList.add('active');
                gridButton.textContent = 'ON';
            } else {
                gridOverlay.classList.remove('active');
                gridButton.classList.remove('active');
                gridButton.textContent = 'OFF';
            }
        }
        
        function changeTimer() {
            timerSeconds = parseInt(document.getElementById('timerSelect').value);
        }
        
        async function toggleFlash() {
            flashEnabled = !flashEnabled;
            const flashButton = document.getElementById('flashToggle');
            
            try {
                const track = mediaStream.getVideoTracks()[0];
                await track.applyConstraints({
                    advanced: [{ torch: flashEnabled }]
                });
                
                if (flashEnabled) {
                    flashButton.classList.add('active');
                    flashButton.textContent = 'ON';
                } else {
                    flashButton.classList.remove('active');
                    flashButton.textContent = 'OFF';
                }
            } catch (error) {
                console.log('Flash not supported:', error);
                showStatus('Flash not available on this camera', 'error');
            }
        }

        // Certificate of Authenticity - Metadata Capture
        async function captureAuthenticityMetadata() {
            const captureTimestamp = new Date();
            
            // Get location if available
            const location = await getLocationData();
            
            // Get device information
            const deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenResolution: `${window.screen.width}x${window.screen.height}`,
                deviceMemory: navigator.deviceMemory || 'Unknown',
                hardwareConcurrency: navigator.hardwareConcurrency || 'Unknown'
            };
            
            // Parse user agent for better device info
            const deviceName = parseDeviceFromUserAgent(navigator.userAgent);
            
            const metadata = {
                // Timestamp data
                capturedAt: captureTimestamp.toISOString(),
                capturedDate: captureTimestamp.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                }),
                capturedTime: captureTimestamp.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    timeZoneName: 'short'
                }),
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                unixTimestamp: captureTimestamp.getTime(),
                
                // Location data
                location: location,
                
                // Device data
                device: {
                    name: deviceName,
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    browser: getBrowserInfo(),
                    os: getOSInfo()
                },
                
                // Camera settings used
                cameraSettings: {
                    resolution: selectedResolution,
                    aspectRatio: selectedAspectRatio,
                    facingMode: currentCamera === 'user' ? 'Front Camera' : 'Rear Camera',
                    flashUsed: flashEnabled,
                    gridEnabled: showGrid,
                    timerUsed: timerSeconds > 0 ? `${timerSeconds} seconds` : 'None'
                },
                
                // Content technical details
                technical: {
                    mediaType: mediaType,
                    format: mediaType === 'photo' ? 'JPEG' : 'WebM Video',
                    fileSize: (capturedBlob.size / (1024 * 1024)).toFixed(2) + ' MB',
                    duration: mediaType === 'video' ? recordingSeconds + ' seconds' : null
                },
                
                // Authenticity markers
                authenticity: {
                    capturedInApp: true,
                    uploadNotAllowed: true,
                    liveCapture: true,
                    watermarkApplied: true,
                    uniqueInstance: true
                }
            };
            
            // Generate content hash for verification
            try {
                const arrayBuffer = await capturedBlob.arrayBuffer();
                const hashBuffer = await crypto.subtle.digest('SHA-256', arrayBuffer);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                const contentHash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                metadata.contentHash = contentHash.substring(0, 16); // First 16 chars for display
            } catch (error) {
                console.log('Hash generation failed:', error);
                metadata.contentHash = 'HASH-' + Date.now();
            }
            
            return metadata;
        }
        
        async function getLocationData() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve(null);
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const coords = {
                            latitude: position.coords.latitude.toFixed(6),
                            longitude: position.coords.longitude.toFixed(6),
                            accuracy: Math.round(position.coords.accuracy) + ' meters',
                            altitude: position.coords.altitude ? Math.round(position.coords.altitude) + ' meters' : null
                        };
                        
                        // Try to get city/state from coordinates
                        try {
                            const locationName = await reverseGeocode(coords.latitude, coords.longitude);
                            coords.city = locationName.city;
                            coords.state = locationName.state;
                            coords.country = locationName.country;
                            coords.formatted = locationName.formatted;
                        } catch (error) {
                            console.log('Reverse geocoding failed:', error);
                        }
                        
                        resolve(coords);
                    },
                    (error) => {
                        console.log('Location permission denied or unavailable:', error);
                        resolve(null);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 5000,
                        maximumAge: 0
                    }
                );
            });
        }
        
        async function reverseGeocode(lat, lon) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json`,
                    { headers: { 'User-Agent': 'ReelAuction/1.0' } }
                );
                const data = await response.json();
                
                return {
                    city: data.address.city || data.address.town || data.address.village,
                    state: data.address.state,
                    country: data.address.country,
                    formatted: data.display_name
                };
            } catch (error) {
                return { city: null, state: null, country: null, formatted: null };
            }
        }
        
        function parseDeviceFromUserAgent(ua) {
            if (ua.includes('iPhone')) return 'iPhone';
            if (ua.includes('iPad')) return 'iPad';
            if (ua.includes('Android')) {
                const match = ua.match(/Android.*;\s*([^)]+)\)/);
                return match ? match[1] : 'Android Device';
            }
            if (ua.includes('Mac')) return 'Mac';
            if (ua.includes('Windows')) return 'Windows PC';
            return 'Unknown Device';
        }
        
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            if (ua.includes('Chrome')) return 'Chrome';
            if (ua.includes('Safari')) return 'Safari';
            if (ua.includes('Firefox')) return 'Firefox';
            if (ua.includes('Edge')) return 'Edge';
            return 'Unknown Browser';
        }
        
        function getOSInfo() {
            const ua = navigator.userAgent;
            if (ua.includes('iPhone') || ua.includes('iPad')) return 'iOS';
            if (ua.includes('Android')) return 'Android';
            if (ua.includes('Mac')) return 'macOS';
            if (ua.includes('Windows')) return 'Windows';
            if (ua.includes('Linux')) return 'Linux';
            return 'Unknown OS';
        }

        async function handleCapture() {
            const btn = document.getElementById('captureBtn');

            // If timer is set, show countdown first
            if (timerSeconds > 0 && !isRecording) {
                await showTimerCountdown();
            }

            if (mediaType === 'photo') {
                // Capture photo
                const video = document.getElementById('videoPreview');
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);

                // Play capture sound
                captureSound.play().catch(e => console.log('Audio play failed:', e));
                
                // Show success message
                const successMsg = document.getElementById('captureSuccessMessage');
                successMsg.style.display = 'block';
                setTimeout(() => successMsg.style.display = 'none', 1500);

                canvas.toBlob(async blob => {
                    capturedBlob = blob;
                    
                    // CAPTURE METADATA FOR CERTIFICATE
                    showStatus('Capturing authenticity data...', 'info');
                    captureMetadata = await captureAuthenticityMetadata();
                    console.log('Certificate metadata captured:', captureMetadata);
                    
                    const url = URL.createObjectURL(blob);
                    document.getElementById('capturedMedia').src = url;
                    document.getElementById('capturedMedia').style.display = 'block';
                    document.getElementById('videoPreview').style.display = 'none';
                    document.getElementById('contentForm').style.display = 'block';
                    
                    if (mediaStream) {
                        mediaStream.getTracks().forEach(track => track.stop());
                    }
                }, 'image/jpeg', 0.95);

            } else if (!isRecording) {
                // Start recording video
                recordedChunks = [];
                mediaRecorder = new MediaRecorder(mediaStream, {
                    mimeType: 'video/webm;codecs=vp9'
                });

                mediaRecorder.ondataavailable = (e) => {
                    if (e.data.size > 0) {
                        recordedChunks.push(e.data);
                    }
                };

                mediaRecorder.onstop = async () => {
                    capturedBlob = new Blob(recordedChunks, { type: 'video/webm' });
                    
                    // CAPTURE METADATA FOR CERTIFICATE
                    showStatus('Capturing authenticity data...', 'info');
                    captureMetadata = await captureAuthenticityMetadata();
                    console.log('Certificate metadata captured:', captureMetadata);
                    
                    const url = URL.createObjectURL(capturedBlob);
                    
                    // Show video success overlay
                    document.getElementById('videoSuccessOverlay').style.display = 'flex';
                    document.getElementById('videoPreview').style.display = 'none';
                    
                    // Show success message briefly
                    const successMsg = document.getElementById('captureSuccessMessage');
                    successMsg.textContent = '‚úì Video Captured!';
                    successMsg.style.display = 'block';
                    setTimeout(() => {
                        successMsg.style.display = 'none';
                        successMsg.textContent = '‚úì Content Captured!';
                    }, 1500);
                    
                    // Set the video element for playback later
                    const capturedVideo = document.getElementById('capturedMedia');
                    capturedVideo.src = url;
                    capturedVideo.controls = true;
                    capturedVideo.style.display = 'none'; // Keep hidden, show overlay instead
                    
                    document.getElementById('contentForm').style.display = 'block';
                    
                    if (mediaStream) {
                        mediaStream.getTracks().forEach(track => track.stop());
                    }
                };

                mediaRecorder.start();
                isRecording = true;
                btn.classList.add('recording');
                
                // Show recording time display
                document.getElementById('recordingTime').classList.add('active');
                
                // Play record start sound
                recordStartSound.play().catch(e => console.log('Audio play failed:', e));

                recordingSeconds = 0;
                recordingTimer = setInterval(() => {
                    recordingSeconds++;
                    const mins = Math.floor(recordingSeconds / 60);
                    const secs = recordingSeconds % 60;
                    document.getElementById('recordingTime').textContent = 
                        `‚è∫ ${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                    if (recordingSeconds >= 60) {
                        handleCapture(); // Stop at 60 seconds
                    }
                }, 1000);

            } else {
                // Stop recording
                isRecording = false;
                btn.classList.remove('recording');
                clearInterval(recordingTimer);
                document.getElementById('recordingTime').classList.remove('active');
                mediaRecorder.stop();
                
                // Play record stop sound
                recordStopSound.play().catch(e => console.log('Audio play failed:', e));
            }
        }
        
        async function showTimerCountdown() {
            const timerDisplay = document.getElementById('timerCountdown');
            
            for (let i = timerSeconds; i > 0; i--) {
                timerDisplay.textContent = i;
                timerDisplay.classList.add('active');
                
                // Beep sound
                const beep = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiDUIFmm98OScTgwOUKvm87FdFwlFnd7wvmEcBS1+zO/biS8IGWu58+SaTBELUrDn9LJeFgpFnN/xwGIdBTSAy+3ciSYII2y589+UTREKUbDk9LRZFQpGm+Dxvl0bBzN9y+7biSgHI2y589+URhIKUa/k9LdYFAtFm9/xwF4bCDR8yezfiSMHJG268t6URBMJUq/l9LdYEwlGnN/xwWAbCTN8ye3biB8GJW+68t2RQxIJUq7m9LlXEwtGnN/xwWAdCTN7ye3bhx0GJ2+88tyQQhIIUq3m9LpWEwpGnt/xwl8dCDN7yO3bhBwGKXC98tuNQBIIUq3m9LxWEQpGnt/xxGAdBzN6x+3agxsGKnG+9dqLPRAHUqzn9L5WEQlEnODxxWIcBzN5xu3ZgRoGK3G/9dmJOw8GUqvm9MBVEAlEnODxyGMcBjJ5xe3ZgBkGLHHB9tiIOQ4FUarm9MJUDwhEneDxymQcBjJ4xOzYfhgGLXHD9deHNg0FUajm9MRUDQdDneDxzGUcBTF4w+zYfRYGLnHE9daGMwwEUKjl9MZUDAdDnuHx0GYcBDB3w+vXfBUGMHHF9dWEMQsFT6fk9MhTCwZCnuHx0WgcAy94wuvXehQFMXLG9dSCLgoFTqfk9cpTCgVBneLx1GobAy53wOrWeBMFM3LI9dOAKQkFTaXj9M1SCQVBneLx1m0bAix2v+rVdRIFNXPJ9dJ+JwgFTKTi9NBRBwQ/nOPx2G4aASp1vunUcxEFN3TK9dF8JQcES6Ph9NJRBgQ+m+Tx2nAaASl0venTcg8EOXXL9dB6IwYESaPh9NRQBgM9muPx3HIaACh0vOjSbw4EOXbM9c94IQUDSKLg9NZPBgI8mePx33MZACd0u+fSbQwDO3fN9c13HwQDR6Hf9NhPBQE6mOLx4XUZACVzuubRagsEPHjO9cx1HQMCSKDe9NpOBQA5l+Hx5HYZACRyueXRaAkDPnnP9ct0GwMCRp/d9NxOBQA3leDx5ngZACNxuOTQZQgEQHrQ9cp0GgICRZ7d9N5NBQA2lN/x6HkZACJwt+PQYwcEQnvR9clyGAEBRJ3c9OBNBAA0k97x6noY//9vtuLPYQYDRHzS9shxFgEBQpvb9OJNBP8zkt7x7HsY//5uu+HPXwQDRn7T9sdwFAAAQZra8+RMAwAykdzy7nwY//5tu+DPXQIDSIDo');
                beep.play().catch(e => console.log('Beep failed:', e));
                
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            timerDisplay.classList.remove('active');
        }

        function resetCamera() {
            document.getElementById('contentForm').style.display = 'none';
            document.getElementById('contentDescription').value = '';
            document.getElementById('charCount').textContent = '0';
            document.getElementById('startingBidInput').value = '1';
            document.getElementById('videoSuccessOverlay').style.display = 'none';
            document.getElementById('cameraPreviewSection').style.display = 'none';
            capturedBlob = null;
            captureMetadata = null;
            isProCapture = false;
        }

        function submitContent() {
            if (!capturedBlob) {
                showStatus('Please capture content first', 'error');
                return;
            }

            const description = document.getElementById('contentDescription').value.trim();
            if (!description) {
                showStatus('Please add a description', 'error');
                return;
            }

            // Get starting bid - Premium users can set custom, non-premium always $1
            let startingBid = 1;
            if (currentUser.isPremium) {
                const customBid = parseInt(document.getElementById('startingBidInput').value);
                if (customBid && customBid >= 1) {
                    startingBid = customBid;
                } else {
                    showStatus('Starting bid must be $1 or more', 'error');
                    return;
                }
            }

            // Pro Capture: capturedBlob is a Cloudinary URL
            const mediaUrl = capturedBlob;
            // Detect type from metadata or URL
            const mediaTypeValue = captureMetadata && captureMetadata.duration ? 'video' : 'image';

            // Create auction
            const newAuction = {
                id: Date.now(),
                creator: currentUser.name,
                creatorId: currentUser.id,
                description: description,
                mediaUrl: mediaUrl,
                mediaType: mediaTypeValue,
                currentBid: startingBid,
                startingBid: startingBid,
                bidCount: 0,
                endTime: Date.now() + 86400000, // 24 hours from now
                timestamp: Date.now(),
                isPremiumContent: currentUser.isPremium,
                isProCapture: true, // All content is now Pro Capture
                // CERTIFICATE OF AUTHENTICITY DATA
                certificateMetadata: captureMetadata
            };

            auctions.unshift(newAuction);
            
            // Generate and show certificate preview
            const { certificateId, certificateText } = generateCertificateText(newAuction, captureMetadata);
            console.log('Certificate generated:', certificateId);
            console.log(certificateText);
            
            showSection('dashboardSection');
            loadAuctions();
            
            if (currentUser.isPremium && startingBid > 1) {
                showStatus(`Content listed with Certificate! Starting bid: $${startingBid}`, 'success');
            } else {
                showStatus('Content listed with Certificate! Auction starts now at $1.', 'success');
            }
            
            resetCamera();
        }
        
        function generateCertificateText(auction, metadata) {
            const certificateId = `CERT-${new Date().getFullYear()}-${
                String(new Date().getMonth() + 1).padStart(2, '0')
            }${String(new Date().getDate()).padStart(2, '0')}-${
                String(Date.now()).slice(-5)
            }`;
            
            const locationText = metadata.location 
                ? `${metadata.location.city ? metadata.location.city + ', ' : ''}${metadata.location.state || metadata.location.country || 'Location enabled'}`
                : 'Location not available';
            
            const certificate = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                CERTIFICATE OF AUTHENTICITY
                        REELAUCTION
            Authentic Real-Time Content Platform
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

This certifies that the digital content described below is an
authentic, one-of-a-kind capture with exclusive ownership 
rights granted to the certificate holder.

Certificate ID: ${certificateId}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CONTENT DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Title: "${auction.description}"

Creator: @${auction.creator}

Captured: ${metadata.capturedDate} at ${metadata.capturedTime}

Location: ${locationText}
${metadata.location && metadata.location.latitude ? `Coordinates: ${metadata.location.latitude}, ${metadata.location.longitude}` : ''}

Device: ${metadata.device.name}
Camera: ${metadata.cameraSettings.facingMode}
Resolution: ${metadata.cameraSettings.resolution}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TECHNICAL SPECIFICATIONS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Format: ${metadata.technical.format}
File Size: ${metadata.technical.fileSize}
${metadata.technical.duration ? `Duration: ${metadata.technical.duration}` : ''}
Aspect Ratio: ${metadata.cameraSettings.aspectRatio}

Camera Settings:
  ‚Ä¢ Flash: ${metadata.cameraSettings.flashUsed ? 'Used' : 'Not used'}
  ‚Ä¢ Grid: ${metadata.cameraSettings.gridEnabled ? 'Enabled' : 'Disabled'}
  ‚Ä¢ Timer: ${metadata.cameraSettings.timerUsed}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
AUCTION DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Listed: ${new Date(auction.timestamp).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
Auction Duration: 24 hours
Starting Bid: $${auction.startingBid.toFixed(2)}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
AUTHENTICITY GUARANTEE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

This certificate attests that:

‚úì Content was captured live in-app (no uploads allowed)
‚úì This is the only unwatermarked copy in existence
‚úì All metadata has been cryptographically verified
‚úì Capture timestamp and location are accurate
‚úì Owner has full exclusive commercial rights
‚úì Content is transferable with this certificate

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                    ReelAuction LLC
                  reelauction.com
            Issued: ${new Date().toLocaleString('en-US')}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Certificate ID: ${certificateId}
Verification URL: reelauction.com/verify/${certificateId}
Content Hash: ${metadata.contentHash}
`;
            
            return { certificateId, certificateText: certificate };
        }

        function handlePostEvent(e) {
            e.preventDefault();
            
            if (!currentUser.isPremium) {
                showStatus('Premium membership required to post events', 'error');
                return;
            }

            const description = document.getElementById('eventDescription').value;
            const dateTime = document.getElementById('eventDateTime').value;
            const endTime = document.getElementById('eventEndTime').value;
            const location = document.getElementById('eventLocation').value;

            // Create new event
            const newEvent = {
                id: Date.now(),
                creator: currentUser.name,
                description: description,
                dateTime: new Date(dateTime),
                endTime: new Date(endTime),
                location: location,
                postedAt: new Date()
            };

            postedEvents.unshift(newEvent);
            
            // Show events section and load them
            showSection('eventsSection');
            loadEvents();
            showStatus('Event posted successfully!', 'success');
            e.target.reset();
        }
        
        function loadEvents() {
            const container = document.getElementById('eventsContainer');
            const now = new Date();
            
            // Filter out past events (events that have already started)
            const upcomingEvents = postedEvents.filter(event => {
                const eventDate = new Date(event.dateTime);
                // Keep events that haven't started yet OR are currently happening (within 3 hours of start)
                const eventEndTime = new Date(eventDate.getTime() + (3 * 60 * 60 * 1000)); // 3 hours after start
                return eventEndTime > now;
            });
            
            // Sort by soonest event first
            const sortedEvents = upcomingEvents.sort((a, b) => {
                return new Date(a.dateTime) - new Date(b.dateTime);
            });
            
            if (sortedEvents.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                        <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">No upcoming events posted yet</p>
                        <p style="font-size: 0.875rem;">Premium creators can announce where they'll be capturing content</p>
                    </div>
                    
                    <div class="event-card">
                        <div class="event-header">
                            <div>
                                <div class="event-creator">@NewsHunter</div>
                                <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                            </div>
                            <div class="event-badge">UPCOMING</div>
                        </div>
                        <div class="event-description">
                            I'll be covering the tech conference tomorrow morning. Expecting exclusive interviews and product launches.
                        </div>
                        <div class="event-time">üìÖ Tomorrow, 9:00 AM PST ‚Ä¢ üåé San Francisco</div>
                    </div>

                    <div class="event-card">
                        <div class="event-header">
                            <div>
                                <div class="event-creator">@StreetPhotog</div>
                                <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                            </div>
                            <div class="event-badge">LIVE NOW</div>
                        </div>
                        <div class="event-description">
                            Currently at the music festival capturing performances. Will post exclusive backstage content throughout the evening.
                        </div>
                        <div class="event-time">üìÖ Today, 6:00 PM PST ‚Ä¢ üåé Los Angeles</div>
                    </div>
                `;
                return;
            }
            
            const eventsHTML = sortedEvents.map(event => {
                const eventDate = new Date(event.dateTime);
                const eventEndDate = event.endTime ? new Date(event.endTime) : null;
                const timeUntilEvent = eventDate - now;
                
                // Determine event status
                let badge = 'UPCOMING';
                let badgeColor = 'var(--accent-gold)';
                
                // If event started within last 3 hours, it's LIVE NOW
                if (timeUntilEvent < 0 && timeUntilEvent > -(3 * 60 * 60 * 1000)) {
                    badge = 'LIVE NOW';
                    badgeColor = 'var(--accent-fire)';
                }
                
                // Format start time
                const formattedStartTime = eventDate.toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    hour12: true
                });
                
                // Format end time if available
                let timeRange = formattedStartTime;
                if (eventEndDate) {
                    const formattedEndTime = eventEndDate.toLocaleString('en-US', {
                        hour: 'numeric',
                        minute: '2-digit',
                        hour12: true,
                        timeZoneName: 'short'
                    });
                    // Check if same day
                    if (eventDate.toDateString() === eventEndDate.toDateString()) {
                        // Same day - show time range: "Jan 29, 9:00 AM - 12:00 PM PST"
                        const startTime = eventDate.toLocaleString('en-US', {
                            hour: 'numeric',
                            minute: '2-digit',
                            hour12: true
                        });
                        timeRange = `${eventDate.toLocaleString('en-US', {month: 'short', day: 'numeric'})}, ${startTime} - ${formattedEndTime}`;
                    } else {
                        // Different days - show full range
                        timeRange = `${formattedStartTime} - ${formattedEndTime}`;
                    }
                }
                
                // Calculate time until event
                let timeUntilText = '';
                if (timeUntilEvent > 0) {
                    const hoursUntil = Math.floor(timeUntilEvent / (1000 * 60 * 60));
                    const daysUntil = Math.floor(hoursUntil / 24);
                    
                    if (daysUntil > 0) {
                        timeUntilText = ` ‚Ä¢ Starts in ${daysUntil} day${daysUntil > 1 ? 's' : ''}`;
                    } else if (hoursUntil > 0) {
                        timeUntilText = ` ‚Ä¢ Starts in ${hoursUntil} hour${hoursUntil > 1 ? 's' : ''}`;
                    } else {
                        const minutesUntil = Math.floor(timeUntilEvent / (1000 * 60));
                        timeUntilText = ` ‚Ä¢ Starts in ${minutesUntil} minute${minutesUntil > 1 ? 's' : ''}`;
                    }
                }
                
                return `
                    <div class="event-card">
                        <div class="event-header">
                            <div>
                                <div class="event-creator">@${event.creator}</div>
                                <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                            </div>
                            <div class="event-badge" style="background: ${badgeColor};">${badge}</div>
                        </div>
                        <div class="event-description">
                            ${event.description}
                        </div>
                        <div class="event-time">
                            üìÖ ${timeRange} ‚Ä¢ üåé ${event.location}${timeUntilText}
                        </div>
                    </div>
                `;
            }).join('');
            
            // Add user events + sample events
            container.innerHTML = eventsHTML + `
                <div class="event-card">
                    <div class="event-header">
                        <div>
                            <div class="event-creator">@NewsHunter</div>
                            <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                        </div>
                        <div class="event-badge">UPCOMING</div>
                    </div>
                    <div class="event-description">
                        I'll be covering the tech conference tomorrow morning. Expecting exclusive interviews and product launches.
                    </div>
                    <div class="event-time">üìÖ Tomorrow, 9:00 AM - 5:00 PM PST ‚Ä¢ üåé San Francisco</div>
                </div>

                <div class="event-card">
                    <div class="event-header">
                        <div>
                            <div class="event-creator">@StreetPhotog</div>
                            <div class="premium-badge" style="margin-top: 0.5rem; display: inline-flex;">‚≠ê PREMIUM</div>
                        </div>
                        <div class="event-badge" style="background: var(--accent-fire);">LIVE NOW</div>
                    </div>
                    <div class="event-description">
                        Currently at the music festival capturing performances. Will post exclusive backstage content throughout the evening.
                    </div>
                    <div class="event-time">üìÖ Today, 6:00 PM - 11:00 PM PST ‚Ä¢ üåé Los Angeles</div>
                </div>
            `;
        }

        function showUpgradeModal() {
            const modal = document.getElementById('auctionModal');
            const content = document.getElementById('modalContent');

            content.innerHTML = `
                <div style="text-align: center; padding: 1rem 0;">
                    <div class="premium-badge" style="display: inline-flex; font-size: 1rem; padding: 0.75rem 1.5rem; margin-bottom: 1.5rem;">
                        ‚≠ê PREMIUM CREATOR
                    </div>
                    <h2 style="font-family: 'Archivo Black', sans-serif; font-size: 2rem; margin-bottom: 1rem;">
                        Unlock Premium Features
                    </h2>
                    <p style="color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.1rem;">
                        Only $49/year
                    </p>
                </div>

                <div style="background: var(--bg-dark); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                    <div style="margin-bottom: 1.5rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem;">
                            <div style="font-size: 2rem;">üìÖ</div>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem;">Post Upcoming Events</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Announce where you'll be capturing content to build anticipation</div>
                            </div>
                        </div>
                    </div>

                    <div style="padding-top: 1.5rem; border-top: 1px solid var(--border);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2rem;">üí∞</div>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem;">Custom Starting Bids</div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Set your own minimum starting bid ($2, $5, $10, or more)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="background: var(--bg-dark); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem; border-left: 4px solid var(--accent-gold);">
                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem;">Premium creators earn more:</div>
                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--accent-gold);">
                        Set higher minimums = Higher payouts
                    </div>
                </div>

                <button class="btn btn-primary" style="width: 100%; margin-bottom: 1rem;" onclick="handleUpgrade()">
                    Upgrade Now - $49/year
                </button>
                <button class="btn btn-ghost" style="width: 100%;" onclick="closeModal()">
                    Maybe Later
                </button>
            `;

            modal.classList.add('active');
        }

        function handleUpgrade() {
            // Mock upgrade (in production, this would use Stripe Checkout)
            currentUser.isPremium = true;
            
            // Update localStorage
            localStorage.setItem('reelauction_user', JSON.stringify(currentUser));
            
            updateUserInterface();
            closeModal();
            showStatus('Welcome to Premium! You can now set custom starting bids and post events.', 'success');
        }

        function showStatus(message, type) {
            const existing = document.querySelector('.status-message');
            if (existing) existing.remove();

            const status = document.createElement('div');
            status.className = `status-message status-${type}`;
            status.textContent = message;
            document.body.appendChild(status);

            setTimeout(() => status.remove(), 4000);
        }

        // Close modal on background click
        document.getElementById('auctionModal').addEventListener('click', (e) => {
            if (e.target.id === 'auctionModal') {
                closeModal();
            }
        });
    </script>
</body>
</html>
